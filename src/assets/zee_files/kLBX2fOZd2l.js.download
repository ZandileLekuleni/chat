if (self.CavalryLogger) { CavalryLogger.start_js(["zigvC"]); }

__d("relay-experimental/QueryResource",["invariant","Promise","fbjs/lib/ExecutionEnvironment","relay-experimental/LRUCache","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("relay-runtime").isPromise;c=b("relay-runtime").RelayFeatureFlags;var i=1e3,j="store-or-network",k=c.ENABLE_PARTIAL_RENDERING_DEFAULT===!0?"partial":"full",l=30*1e3;function m(a,b,c){return b+"-"+c+"-"+a.request.identifier}function n(a,b){var c;c={__id:a.fragment.dataID,__fragments:(c={},c[a.fragment.node.name]=a.request.variables,c),__fragmentOwner:a.request};return{cacheKey:b,fragmentNode:a.request.node.fragment,fragmentRef:c,operation:a}}function o(a,c,d,e){__p&&__p();var f=d,h=0,i=!1,j=null,k=null,m=function(a){h++;h===1&&(j=a.retain(c.root));return{dispose:function(){h=Math.max(0,h-1),h===0&&(j!=null||g(0,14187),j.dispose(),j=null),e(n)}}},n={cacheKey:a,getValue:function(){return f},setValue:function(a){f=a},getRetainCount:function(){return h},temporaryRetain:function(a){__p&&__p();if(!b("fbjs/lib/ExecutionEnvironment").canUseDOM)return;if(i===!0)return;var c=m(a),d=null;a=function(){clearTimeout(d),d=null,k=null,c.dispose()};d=setTimeout(a,l);k!=null&&k();k=a},permanentRetain:function(a){var b=m(a);k!=null&&(k(),k=null);i=!0;return{dispose:function(){b.dispose(),i=!1}}}};return n}var p=function(){__p&&__p();function a(a){var c=this;this.$5=function(a){a.getRetainCount()<=0&&c.$2["delete"](a.cacheKey)};this.$1=a;this.$2=b("relay-experimental/LRUCache").create(i)}var c=a.prototype;c.prepare=function(a,b,c,d,e,f){__p&&__p();var g=this.$1;c=(c=c)!=null?c:j;d=(d=d)!=null?d:k;var i=m(a,c,d);f!=null&&(i+="-"+f);f=this.$2.get(i);f==null&&(f=this.$4(i,a,b,c,d,e));f.temporaryRetain(g);i=f.getValue();if(h(i)||i instanceof Error)throw i;return i};c.retain=function(a){var b=this,c=this.$1,d=a.cacheKey,e=a.operation,f=this.$2.get(d);f==null&&(f=o(d,e,a,this.$5),this.$2.set(d,f));var h=f.permanentRetain(c);return{dispose:function(){h.dispose(),f!=null||g(0,15048),b.$5(f)}}};c.getCacheEntry=function(a,b,c){c=(c=c)!=null?c:k;a=m(a,b,c);return this.$2.get(a)};c.$6=function(a,b){var c=n(a,b);a=o(b,a,c,this.$5);this.$2.set(b,a)};c.$4=function(a,c,d,e,f,h){__p&&__p();var i=this,j=this.$1,k=j.check(c.root);f=k||f==="partial";var l,m,p=function(){};switch(e){case"store-only":l=!1;m=!0;break;case"store-or-network":l=!k;m=f;break;case"store-and-network":l=!0;m=f;break;case"network-only":default:l=!0;m=!1;break}m&&this.$6(c,a);if(l){var q=n(c,a);d.subscribe({start:h==null?void 0:h.start,next:function(){__p&&__p();var b=j.lookup(c.fragment);if(!b.isMissingData){var d;d=(d=i.$2.get(a))!=null?d:o(a,c,q,i.$5);d.setValue(q);i.$2.set(a,d);p()}d=h==null?void 0:h.next;d&&d(b)},error:function(b){var d;d=(d=i.$2.get(a))!=null?d:o(a,c,b,i.$5);d.setValue(b);i.$2.set(a,d);p();d=h==null?void 0:h.error;d&&d(b)},complete:function(){p();var a=h==null?void 0:h.complete;a&&a()},unsubscribe:h==null?void 0:h.unsubscribe});e=this.$2.get(a);if(!e){k=new(b("Promise"))(function(a){p=a});k.displayName="Relay("+c.fragment.node.name+")";e=o(a,c,k,this.$5);this.$2.set(a,e)}}else{f=h==null?void 0:h.complete;f&&f()}d=this.$2.get(a);d!=null||g(0,13816);return d};return a}();function q(a){return new p(a)}var r=new Map();function a(a){var b=r.get(a);if(b)return b;b=q(a);r.set(a,b);return b}e.exports={createQueryResource:q,getQueryResourceForEnvironment:a}}),null);