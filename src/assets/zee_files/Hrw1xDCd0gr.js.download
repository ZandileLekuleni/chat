if (self.CavalryLogger) { CavalryLogger.start_js(["ZMm6g"]); }

__d("relay-experimental/FragmentResource",["invariant","relay-experimental/LRUCache","mapObject","warning","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("relay-runtime").__internal.getPromiseForRequestInFlight,i=b("relay-runtime").getFragmentIdentifier,j=b("relay-runtime").getFragmentOwner,k=b("relay-runtime").getSelector,l=b("relay-runtime").isPromise,m=b("relay-runtime").recycleNodesInto,n=1e6;function o(a){return Array.isArray(a)?a.some(function(a){return a.isMissingData}):a.isMissingData}function p(a,b){return Array.isArray(b)?{cacheKey:a,snapshot:b,data:b.map(function(a){return a.data})}:{cacheKey:a,snapshot:b,data:b.data}}function q(a,b,c,d,e){d=k(b,c);d!=null||g(0,14389,b.name,e,e);return d.kind==="PluralReaderSelector"?d.selectors.map(function(b){return a.lookup(b)}):a.lookup(d)}function r(a,b){return a.getOperationTracker().getPromiseForPendingOperationsAffectingOwner(b)}var s=function(){__p&&__p();function a(a){this.$1=a,this.$2=b("relay-experimental/LRUCache").create(n)}var c=a.prototype;c.read=function(a,c,d,e){__p&&__p();var f,h=this.$1,k=i(a,c);if(c==null)return{cacheKey:k,data:null,snapshot:null};if((a==null?void 0:(f=a.metadata)==null?void 0:f.plural)===!0){Array.isArray(c)||g(0,13793,e!=null?" for key `"+e+"`":"",a.name,typeof c,a.name);if(c.length===0)return{cacheKey:k,data:[],snapshot:[]}}f=this.$2.get(k);if(f!=null){if(l(f)||f instanceof Error)throw f;return p(k,f)}e=j(a,c);f=q(h,a,c,e,d);h=Array.isArray(e)?e[0]:e;e=(c=h==null?void 0:h.node.params.name)!=null?c:"Unknown Parent Query";if(!o(f)){this.$2.set(k,f);return p(k,f)}h!=null||g(0,13815,a.name,d,d);c=this.$3(k,h);if(c!=null)throw c;b("warning")(!1,"Relay: Tried reading fragment `%s` declared in `%s`, but it has missing data and its parent query `%s` is not being fetched.\nThis might be fixed by by re-running the Relay Compiler.  Otherwise, make sure of the following:\n* You are correctly fetching `%s` if you are using a \"store-only\" `fetchPolicy`.\n* Other queries aren't accidentally fetching and overwriting the data for this fragment.\n* Any related mutations or subscriptions are fetching all of the data for this fragment.\n* Any related store updaters aren't accidentally deleting data for this fragment.",a.name,d,e,e);return p(k,f)};c.readSpec=function(a,c,d){var e=this;return b("mapObject")(a,function(a,b){var f=c[b];return e.read(a,f,d,b)})};c.subscribe=function(a,b){__p&&__p();var c=this,d=this.$1,e=a.cacheKey,f=a.snapshot;if(!f)return{dispose:function(){}};a=this.checkMissedUpdates(a);var h=a[0];a=a[1];h&&b();var i=[];Array.isArray(f)?(Array.isArray(a)||g(0,18208),a.forEach(function(a,f){i.push(d.subscribe(a,function(a){c.$4(e,a,f),b()}))})):(a!=null&&!Array.isArray(a)||g(0,18209),i.push(d.subscribe(a,function(a){c.$2.set(e,a),b()})));return{dispose:function(){i.map(function(a){return a.dispose()}),c.$2["delete"](e)}}};c.subscribeSpec=function(a,c){var d=this,e=b("mapObject")(a,function(a){return d.subscribe(a,c)});return{dispose:function(){Object.keys(e).forEach(function(a){a=e[a];a.dispose()})}}};c.checkMissedUpdates=function(a){__p&&__p();var b=this.$1,c=a.cacheKey;a=a.snapshot;if(!a)return[!1,null];var d=!1;if(Array.isArray(a)){var e=[];a.forEach(function(f,g){var a=b.lookup(f.selector);f=f.data;var c=a.data;c=m(f,c);c!==f&&(a=babelHelpers["extends"]({},a,{data:c}),d=!0);e[g]=a});d&&this.$2.set(c,e);return[d,e]}var f=b.lookup(a.selector);a=a.data;var g=f.data;g=m(a,g);g!==a&&(f=babelHelpers["extends"]({},f,{data:g}),this.$2.set(c,f),d=!0);return[d,f]};c.checkMissedUpdatesSpec=function(a){var b=this,c=!1;Object.keys(a).forEach(function(d){d=a[d];c=b.checkMissedUpdates(d)[0]});return c};c.$3=function(a,b){__p&&__p();var c=this,d,e=this.$1;d=(d=h(e,b))!=null?d:r(e,b);if(!d)return null;e=d.then(function(){c.$2["delete"](a)})["catch"](function(b){c.$2.set(a,b)});this.$2.set(a,e);e.displayName="Relay("+b.node.params.name+")";return e};c.$4=function(a,b,c){var d=this.$2.get(a);Array.isArray(d)||g(0,13921);d=[].concat(d);d[c]=b;this.$2.set(a,d)};return a}();function t(a){return new s(a)}var u=new Map();function a(a){var b=u.get(a);if(b)return b;b=t(a);u.set(a,b);return b}e.exports={createFragmentResource:t,getFragmentResourceForEnvironment:a}}),null);