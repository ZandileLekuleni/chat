if (self.CavalryLogger) { CavalryLogger.start_js(["4iEev"]); }

__d("XHPTemplate",["DataStore","DOM","HTML","XHPTemplateProcessor"],(function(a,b,c,d,e,f){__p&&__p();var g=b("XHPTemplateProcessor").processor;a=function(){"use strict";__p&&__p();function a(a){g instanceof Function&&(a=g(a)),this._model=a}var c=a.prototype;c.render=function(){b("HTML").isHTML(this._model)&&(this._model=b("DOM").setContent(document.createDocumentFragment(),this._model)[0]);return this._model.cloneNode(!0)};c.build=function(){return new h(this.render())};a.getNode=function(b,c){return a.getNodes(b)[c]};a.getNodes=function(a){__p&&__p();var c=b("DataStore").get(a,"XHPTemplate:nodes");if(!c){c={};var d=b("DOM").scry(a,"[data-jsid]");d.push(a);var e=d.length;while(e--){var f=d[e];c[f.getAttribute("data-jsid")]=f;f.removeAttribute("data-jsid")}b("DataStore").set(a,"XHPTemplate:nodes",c)}return c};return a}();var h=function(){"use strict";__p&&__p();function a(a){this._root=a,this._populateNodes()}var c=a.prototype;c._populateNodes=function(){this._nodes={};this._leaves={};var a=this._root.getElementsByTagName("*");for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.getAttribute("data-jsid");e&&(d.removeAttribute("data-jsid"),this._nodes[e]=d,this._leaves[e]=!d.childNodes.length)}};c.getRoot=function(){return this._root};c.getNode=function(a){return this._nodes[a]};c.setNodeProperty=function(a,b,c){this.getNode(a)[b]=c;return this};c.setNodeContent=function(a,c){if(!this._leaves[a])throw new Error("Can't setContent on non-leaf node: "+a);b("DOM").setContent(this.getNode(a),c);return this};return a}();e.exports=a}),null);
__d("WebWorkerTransferPromise",["invariant","Promise"],(function(a,b,c,d,e,f,g){__p&&__p();a={expectPromise:function(a){__p&&__p();var c=new(b("Promise"))(function(b,c){__p&&__p();function d(e){__p&&__p();e instanceof MessageEvent||g(0,1465);e=e.data;e||g(0,1466);var f=e.type;e=e.data;switch(f){case"resolve":b(e);break;case"reject":c(e);break;default:throw new Error("Expected a WebWorkerTransferPromise, but didn't receive one.")}a.removeEventListener("message",d)}a.addEventListener("message",d)});return c},sendPromise:function(a,b){function c(b){a.postMessage({type:"resolve",data:b})}function d(b){a.postMessage({type:"reject",data:b})}b(c,d)}};e.exports=a}),null);
__d("CEA608ExtractorWebWorker",["CEA608ExtractorWorkerResource","WebWorker","WebWorkerTransferPromise"],(function(a,b,c,d,e,f){__p&&__p();var g=null;function h(){g||(g=new(b("WebWorker"))(b("CEA608ExtractorWorkerResource")).setAllowCrossPageTransition(!0).execute());return g}a={isSupported:function(){return b("WebWorker").isMessageChannelSupported()},extract:function(a){var c=h().createMessageChannel(a);return b("WebWorkerTransferPromise").expectPromise(c)["finally"](function(){return c.close()})},prepare:function(){h()}};e.exports=a}),null);
__d("VideoPlayerCea608Command",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({TEXT:"text",PAC:"pac",MIDROW:"midrow",CARRIAGE_RETURN:"carriage_return",START_ROLL_UP_2:"start_roll_up_2",START_ROLL_UP_3:"start_roll_up_3",START_ROLL_UP_4:"start_roll_up_4",END_OF_CAPTION:"end_of_caption",ERASE_DISPLAY_MEMORY:"erase_display_memory",ERASE_NON_DISPLAY_MEMORY:"erase_non_display_memory",BACKSPACE:"backspace",DELETE_TIL_END_OF_ROW:"delete_til_end_of_row",RESUME_DIRECT_CAPTIONING:"resume_direct_captioning",RESUME_CAPTION_LOADING:"resume_caption_loading",TAB_OFFSET:"tab_offset",FLASH_ON:"flash_on",__DEPRECATED__ALARM_OFF:"alarm_off",__DEPRECATED__ALARM_ON:"alarm_on",__DEPRECATED__TEXT_RESTART:"text_restart",__DEPRECATED__RESUME_TEXT_DISPLAY:"resume_text_display"});e.exports=a}),null);
__d("extractCEA608",["CEA608ExtractorWebWorker","JSResource","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=b("gkx")("678908");function a(a){if(h&&b("CEA608ExtractorWebWorker").isSupported())return b("CEA608ExtractorWebWorker").extract(a);g||(g=b("JSResource")("CEA608Extractor").__setRef("extractCEA608").load());return g.then(function(b){return b.extract(a)})}a.prepare=function(){if(!h||!b("CEA608ExtractorWebWorker").isSupported())return;b("CEA608ExtractorWebWorker").prepare()};e.exports=a}),null);
__d("VideoPlayerCea608SubtitleSourceImplFacebook",["VideoPlayerCea608Command","extractCEA608","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h,i=15,j=32,k=function(){__p&&__p();function a(){this.$2=0;this.$1=new Array(j);for(var a=0;a<j;++a)this.$1[a]=" "}var b=a.prototype;b.setPos=function(a){this.$2=Math.max(0,Math.min(j-1,a))};b.movePos=function(a){a=this.$2+a;this.setPos(a)};b.backspace=function(){this.movePos(-1),this.$1[this.$2]=" "};b.putCharacter=function(a){var b=this.$2;b<j&&(this.$1[b]=a,this.movePos(1))};b.clearFromPos=function(a){for(var a=a;a<j;a++)this.$1[a]=" "};b.clear=function(){this.clearFromPos(0),this.$2=0};b.clearToEndOfRow=function(){this.clearFromPos(this.$2)};b.getCharacters=function(){return this.$1};b.getPos=function(){return this.$2};return a}(),l=function(){__p&&__p();function a(){this.$2=i-1;this.$3=null;this.$1=new Array(i);for(var a=0;a<i;++a)this.$1[a]=new k()}var b=a.prototype;b.clear=function(){this.$1.forEach(function(a,b){a.clear()})};b.setPAC=function(a){var b=a.row-1;this.$3!=null&&b<this.$3-1&&(b=this.$3-1);this.$2=b;b=this.$1[this.$2];a.indent!==null&&b.setPos(a.indent)};b.putCharacter=function(a){var b=this.$1[this.$2];b.putCharacter(a)};b.movePos=function(a){var b=this.$1[this.$2];b.movePos(a)};b.setRollupSize=function(a){this.$3=a};b.rollup=function(){if(this.$3==null)return;var a=this.$2+1-this.$3;a=this.$1.splice(a,1)[0];a.clear();this.$1.splice(this.$2,0,a)};b.backspace=function(){this.$1[this.$2].backspace()};b.clearToEndOfRow=function(){this.$1[this.$2].clearToEndOfRow()};b.getRows=function(){return this.$1.slice()};b.getCurrentRowIndex=function(){return this.$2};return a}();function m(a){return a.getRows().map(function(a){return a.getCharacters().join("")})}function n(a){var b=a.getCurrentRowIndex();return"\n"+a.getRows().map(function(a,c){var d=a.getPos();return String(c+1).padStart(3," ")+" ["+a.getCharacters().join("")+"]"+(c===b?"< ":"  ")+String(d).padStart(2," ")}).join("\n")+"\n"}var o=function(){__p&&__p();function a(){}var c=a.prototype;c.handleCommand=function(a,c,d){__p&&__p();switch(a.type){case b("VideoPlayerCea608Command").TEXT:d.putCharacter(a.data.character);return!1;case b("VideoPlayerCea608Command").TAB_OFFSET:d.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:return!1;case b("VideoPlayerCea608Command").BACKSPACE:d.backspace();return!1;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:d.clearToEndOfRow();return!1;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").ERASE_NON_DISPLAY_MEMORY:d.clear();return!1;case b("VideoPlayerCea608Command").PAC:d.setPAC(a.data.pacData);return!1;default:return!1}};return a}(),p=function(){__p&&__p();function a(){}var c=a.prototype;c.handleCommand=function(a,c,d){__p&&__p();switch(a.type){case b("VideoPlayerCea608Command").TEXT:c.putCharacter(a.data.character);return!0;case b("VideoPlayerCea608Command").TAB_OFFSET:c.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:return!1;case b("VideoPlayerCea608Command").BACKSPACE:c.backspace();return!0;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:c.clearToEndOfRow();return!0;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").PAC:c.setPAC(a.data.pacData);return!1;default:return!1}};return a}(),q=function(){__p&&__p();function a(){}var c=a.prototype;c.handleCommand=function(a,b,c){return this.$1(a,b,c)};c.$1=function(a,c,d){__p&&__p();switch(a.type){case b("VideoPlayerCea608Command").TEXT:c.putCharacter(a.data.character);return!0;case b("VideoPlayerCea608Command").TAB_OFFSET:c.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:c.rollup();return!0;case b("VideoPlayerCea608Command").BACKSPACE:c.backspace();return!0;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:c.clearToEndOfRow();return!0;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").ERASE_NON_DISPLAY_MEMORY:d.clear();return!1;case b("VideoPlayerCea608Command").PAC:c.setPAC(a.data.pacData);return!1;default:return!1}};return a}();a=function(){__p&&__p();function a(a){__p&&__p();var b=a.onSubtitlesLoaded;a=a.onSubtitlesChanged;this.$1=null;this.$2=null;this.$3=[];this.$4=null;this.$5=new l();this.$6=new l();this.$7=new o();this.$8=null;this.$9={changedCount:0,commandsHandledCount:0,fragmentsInsertedCount:0,fragmentsProcessedCount:0,processStartedCount:0,processedCount:0,timeUpdateHandledCount:0};this.$1=b;this.$2=a}var c=a.prototype;c.appendFragments_DEPRECATED=function(a){this.$10(a)};c.processBytes=function(a){var c=this;this.$9.processStartedCount++;return b("extractCEA608")({debugLogEnabled:g,timescale:a.timescale,videoBytes:a.videoBytes}).then(function(a){c.$9.processedCount++,c.$10(a)})};c.handleTimeUpdate=function(a){this.$11(a)};c.getStagingScreenForTestSnapshot=function(){return n(this.$6)};c.getDisplayScreenForTestSnapshot=function(){return n(this.$5)};c.destroy=function(){this.$1=null,this.$2=null,this.$3.length=0,this.$4=null,this.$5.clear(),this.$6.clear(),this.$8=null,this.$9={changedCount:0,commandsHandledCount:0,fragmentsInsertedCount:0,fragmentsProcessedCount:0,processStartedCount:0,processedCount:0,timeUpdateHandledCount:0}};c.$10=function(a){__p&&__p();var b=this;a.forEach(function(a){var c=a.presentationTime,d;for(d=b.$3.length;d>0;d--){var e=d===b.$3.length?Number.MAX_VALUE:b.$3[d].presentationTime,f=b.$3[d-1].presentationTime;if(c<e&&c>=f)break}b.$9.fragmentsInsertedCount++;b.$3.splice(d,0,a)})};c.$11=function(a){__p&&__p();this.$9.timeUpdateHandledCount++;if(!this.$3.length||this.$3[0].presentationTime>a)return;var c=0,d=!1;for(;c<this.$3.length;++c){var e=this.$3[c];if(e.presentationTime>a)break;this.$9.fragmentsProcessedCount++;if(this.$4!=null&&(e.type!==b("VideoPlayerCea608Command").TEXT||e.data.isSpecial===!0)&&JSON.stringify(e)===JSON.stringify(this.$4))continue;this.$4=e;e=this.$12(e);e&&(d=!0);this.$9.commandsHandledCount++}this.$3.splice(0,c);this.$13(m(this.$5),{textAlignment:this.$14(this.$7)})};c.$12=function(a){__p&&__p();switch(a.type){case b("VideoPlayerCea608Command").RESUME_CAPTION_LOADING:this.$7=new o();return!1;case b("VideoPlayerCea608Command").RESUME_DIRECT_CAPTIONING:this.$7=new p();this.$5=this.$6;this.$6=new l();return!0;case b("VideoPlayerCea608Command").END_OF_CAPTION:if(this.$7 instanceof o){var c=this.$6;this.$6=this.$5;this.$5=c;return!0}return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_2:this.$5.setRollupSize(2);this.$7=new q();return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_3:this.$5.setRollupSize(3);this.$7=new q();return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_4:this.$5.setRollupSize(4);this.$7=new q();return!1}c=this.$7.handleCommand(a,this.$5,this.$6);return c};c.$14=function(a){if(a instanceof o)return"center";else if(a instanceof p)return"center";else if(a instanceof q)return"left";else return"center"};c.$13=function(a,b){if(this.$8==null||this.$8.length!==a.length||this.$8.some(function(b,c){return b!==a[c]})){this.$9.changedCount++;var c=this.$1;c&&(c(),this.$1=null);c=this.$2;c&&c(a,b)}this.$8=a};return a}();e.exports=a}),null);