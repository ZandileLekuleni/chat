if (self.CavalryLogger) { CavalryLogger.start_js(["WYg6u"]); }

__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_array","bs_string","bs_caml_array","bs_belt_Option","bs_caml_format","CurrentUser","bs_js_primitive","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return b("bs_array").map(function(a){var c=a.user_confirmation;c=c==null?[null,null,null,null,!1]:[c.cancel_button_label,c.continue_button_label,c.confirmation_message,c.confirmation_title,!0];var d=a.payment_metadata;return{action_link:a.action_link,action_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),action_objects:a.action_objects,title:a.title,confirmation_cancel_label:c[0],confirmation_continue_label:c[1],confirmation_message:c[2],confirmation_title:c[3],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,payment_metadata:d==null?{payment_module_config:null,total_price:null}:{payment_module_config:d.payment_module_config,total_price:d.total_price},render_style:a.render_style,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button},should_show_user_confirmation:c[4],page_id:a.page_id}},a)}function i(a){return b("bs_array").map(function(a){var c=a.url;c=c==null?null:new(b("URI"))(c).getUnqualifiedURI().toString();return{title:a.title,uri:c}},a)}function a(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function c(a){if(a==null)return null;else return{url:a.uri,src:a.uri,width:a.width,height:a.height}}function j(a,b){__p&&__p();var c=b.cover_photo,d;if(c==null)d=[null,null,null];else{var e=c.photo.image;e=e==null?[null,null]:[e.uri,{height:e.height,width:e.width}];d=[c.photo.id,e[0],e[1]]}c=b.location;e=c==null?[null,null]:[c.latitude,c.longitude];c=b.overall_star_rating;return{address:b.address.single_line_full_address,category:b.top_category_name,coverPhotoID:d[0],coverPhotoURL:d[1],coverPhotoDimensions:d[2],latitude:e[0],longitude:e[1],name:b.name,rating:c==null?null:c.value,pageID:b.id,priceRange:b.price_range_description,viewerID:a}}function k(a){var b=a.group_commerce_item_seller,c=a.primary_photo,d;if(c==null)d=null;else{c=c.image;d=c==null?null:c.uri}return{caption:a.group_commerce_item_description.text,desc:a.group_commerce_item_description.text,owner_id:b==null?null:b.id,price:a.formatted_price.text,text:a.group_commerce_item_description.text,title:a.group_commerce_item_title,thumb_url:d,url:a.url}}function l(a){return{app_name:a.application_name,artists:a.artist_names,audio_url:a.audio_url,duration_ms:a.duration_ms,title:a.music_title}}function m(a){var c=a.payment;return{id:a.id,desc:a.desc,display_total_cost:a.total_cost,merchant_name:a.merchant_name,target_url:a.target_url,thumb_url:a.thumb_url,raw_amount:a.raw_amount,payment_id:c==null?null:c.id,total_cost:{amount:b("bs_caml_format").caml_float_of_string(a.price_amount),currency:a.price_currency},name:a.name}}function n(a){return{fundraiserID:a.fundraiserID,canDonate:a.canDonate,hasViewerDonated:a.hasViewerDonated,fundraiserDetailedProgressText:a.fundraiserDetailedProgressText,fundraiserSubtitleText:a.fundraiserSubtitleText,focusedCoverPhoto:a.focusedCoverPhoto}}function o(a){return{id:a.id,name:a.name,is_malicious:a.is_malicious,attach_type:b("MercuryAttachmentType").FILE,url:a.uri,extension:a.extension,filesize:a.filesize}}function p(a){return{id:a.id,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").VIDEO,url:a.playable_url,extension:a.extension,filesize:a.filesize,name:a.filename,height:a.height,width:a.width}}function q(a){return{id:a.id,name:a.name,desc:a.desc,thumb_url:a.thumb_url,item_url:a.item_url,title:a.name,text:a.desc,source:a.source,image_aspect_ratio:a.image_aspect_ratio,metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},default_action:a.default_action,call_to_actions:h(a.call_to_actions)}}function r(a){__p&&__p();var c=function(a){a=a.services_vertical_info;if(a==null)return void 0;else return{isEligibleForAppointmentCalendar:a.is_eligible_for_appointment_calendar,isEligibleForMultiServicesUI:a.is_eligible_for_multi_services_ui,timezoneName:a.time_zone_name}},d=a.page;c=d==null?[void 0,void 0,void 0]:[d.id,b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("ServicesCalendarSyncType")[d.calendar_sync_type])),c(d)];d=a.native_component_flow_request;var e;if(d==null)e=null;else{var f=d.page,h=d.page,i=d.page,j;if(i==null)j=void 0;else{i=i.profile_picture;j=i==null?void 0:i.uri}i=d.suggested_time_range;var k=d.user,l=d.user,m=d.job_application,n=d.user,o;if(n==null)o=void 0;else{n=n.profile_picture;o=n==null?void 0:n.uri}e={additionalInfo:d.additional_info,appointmentAddress:d.appointment_address,archivedStatus:d.archived_status,availability:d.availability,consumer_phone_number:d.consumer_phone_number,hasSavedToCalendar:d.has_saved_to_calendar,recurMessage:d.recur_message,requestFlowType:d.request_flow_type,generalInfo:d.service_general_info,id:d.id,pageID:f==null?void 0:f.id,pageName:h==null?void 0:h.name,pageProfilePic:j,preferredTimeRange:i==null?null:{end:i.end,start:i.start},productItems:d.product_items,reminderBubbleText:d.reminder_bubble_text,requestAdminApprovalType:d.request_admin_approval_type,requestedTime:d.requested_time,specialRequest:d.special_request,status:d.booking_status_value,statusLabel:d.status,subtitle:d.ls_xma_subtitle,title:d.ls_xma_title,userID:k==null?void 0:k.id,username:l==null?void 0:l.short_name,jobApplicationID:m==null?void 0:m.id,userProfilePic:o}}n=a.message_bubble_type;var p;switch(n){case"CANCELLED":p=["Cancelled",g._("Cancelled")];break;case"DECLINED":p=["Declined",g._("Declined")];break;case"REQUESTED":p=["Requested",g._("Requested")];break;case"SCHEDULEED":p=["Scheduled",g._("Scheduled")];break;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}f=a.user;return{id:a.id,pageID:c[0],calendarSyncType:c[1],userID:f==null?"0":f.id,status:p[0],statusLabel:p[1],viewerID:b("CurrentUser").getAccountID(),requestMetadata:e,servicesVerticalInfo:c[2]}}function s(a){return{id:a.id,page_id:a.page.id,user_id:a.consumer.id,time_ranges:b("bs_array").map(function(a){return{start:a.start,end:a.end}},a.formatted_available_time_ranges),has_booking_request_created:a.has_booking_request_created}}function t(a){return{id:a.id}}function u(a){return{live_location_id:a.live_location_id,is_expired:a.is_expired,expiration_time:a.expiration_time,sender:a.sender,coordinate:a.coordinate,location_title:a.location_title,sender_destination:a.sender_destination,stop_reason:a.stop_reason}}function v(a){return{sender_wec_number:a.sender_wec_number,sender_wec_number_formated:a.sender_wec_number_formated,sender_wec_number_fbid:a.sender_wec_number_fbid,sender_wec_name:a.sender_wec_name}}function w(a){var b=a.preview;b=b==null?null:b.uri;var c=a.large_preview;c=c==null?null:c.uri;return{id:a.id,extension:a.extension,preview:a.preview,large_preview:a.large_preview,attach_type:"photo",large_preview_url:c,preview_url:b}}function x(a){return{id:a.id,name:a.filename,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").AUDIO,url:a.playable_url,extension:a.extension,filesize:a.filesize,duration:a.duration}}function y(a){var b=a.first_metaline;return{desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,metalines:b==null?{}:{metaline_1:b},name:a.name,source:a.source_name,text:a.description,thumb_url:a.image_url,title:a.name,default_action:a.default_action,call_to_actions:h(a.call_to_actions),media_blob_attachments:a.media_blob_attachments}}function z(a){var c=b("bs_array").map(y,a.business_items.nodes),d=h(a.call_to_actions);return{message:a.message,call_to_actions:d,items:c}}function A(a){return{message:a.message,call_to_actions:h(a.call_to_actions),items:b("bs_array").map(y,a.promotion_items.nodes)}}function B(a){var c=a.structured_address.streets,d=a.partner_logo;return{account_holder_name:a.account_holder_name,adjustments:b("bs_array").map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.adjustment_amount}},a.adjustments),cancellation_url:a.cancellation_url,items:b("bs_array").map(y,a.items.nodes),merchant_name:a.merchant_name,messenger_commerce_bubble_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceBubbleType")[a.messenger_commerce_bubble_type])),order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,receipt_id:a.receipt_id,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,shipping_method:a.shipping_method,status:a.status,structured_address:{city:a.structured_address.city,state:a.structured_address.state,country:a.structured_address.country,postal_code:a.structured_address.postal_code,street_1:b("bs_caml_array").caml_array_get(c,0),street_2:b("bs_caml_array").caml_array_get(c,1)},subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax,partner_logo:d==null?void 0:d.uri}}function C(a,c){return{payment_modules_client:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("PaymentModulesClient")[c.payment_modules_client])),is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:b("bs_array").map(function(a){return{item_id:a.item_id,name:a.name,subtitle:a.subtitle,description:a.description,unit_price:a.unit_price,image_urls:b("bs_array").map(function(a){return a.uri},a.images),quantity:a.quantity}},c.item_list),components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,actor_id:a,invoicer_id:c.invoicer_id}}var D=function(a){__p&&__p();var c=b("LeadGenInfoFieldTypes"),d={},e=[];for(var a=a.field_data_list,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h.field_type,j=h.label;h=h.values;i===c.CUSTOM||i===c.ZIP?e.push({label:j,values:h}):d[i]={label:j,values:h}}d.questions=e;return d};function E(a,b){var c=b.invite_recipient;c=c==null?null:c.id;var d=b.invite_sender;d=d==null?null:d.id;return{quick_invite_id:b.id,recipient_id:c,sender_id:d,is_viewer_recipient:a===c}}function F(a){var b=function(a){if(a==null)return null;else return a.uri},c=a.listing_category;c=c==null?[null,null]:[c.offer_image,c.request_image];return{listingType:a.listing_type,mapURI:b(a.map_image),offerURI:b(c[0]),requestURI:b(c[1])}}function G(a){return{sender:a.sender,receiver:a.receiver,transfer_id:a.transfer_id,bubbleView:a.bubble_view}}function H(a){__p&&__p();var c=a.receiver_profile,d;if(c==null)d=null;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.sender;if(e==null)c={};else{var f=e.profile_picture;c={id:e.id,name:e.name,full_name:e.full_name,picture:f==null?null:f.uri,profile_uri:e.url}}f=a.transfer_context;if(f==null)e=[null,null,null];else{var g=f.transfer_theme;e=[f.memoText,b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.memo_images),g==null?null:g.id]}f=a.platform_item;g=f==null?null:{name:f.name,description:f.description,image:b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.photos),refURL:f.url};f=a.amount_fb_discount;return{sender:c,amountWithSymbol:a.transaction_amount.formatted_amount,status:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PTransferStatus")[a.transfer_status])),receiver:d,transfer_id:a.transfer_id,completedTime:a.completedTime,updatedTime:a.updatedTime,creationTime:a.creationTime,amount:a.transaction_amount.amount,memoText:e[0],memoPhotoURLs:e[1],themeID:e[2],discountAmount:f==null?null:f.formatted,fundsAvailability:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("FundsAvailability")[a.funds_availability])),groupThreadFBID:a.group_thread_fbid,platform_item:g,statusDescription:{markup:a.status_description},bubbleView:a.bubble_view,currencyCode:a.currency_amount.currency}}function I(a){__p&&__p();var c=a.requester,d;if(c==null)d=void 0;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.requestee;if(e==null)c=void 0;else{var f=e.profile_picture;c={id:e.id,name:e.short_name,full_name:e.name,picture:f==null?null:f.uri,profile_url:e.url}}f=b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentRequestStatus")[a.request_status]));e=a.transfer;e=e==null?[null,""]:[H(e),e.id];var g=a.request_theme;return{amount:a.transaction_amount.amount,amountWithSymbol:a.amount.formatted,requestee:c,requester:d,currentStatus:f,currency:a.amount.currency,creationTime:a.creation_time,groupThreadFBID:a.group_thread_fbid,id:a.id,memoText:a.memo_text,themeID:g==null?null:g.id,transfer:e[0],transferID:e[1],updatedTime:a.updated_time,bubbleView:a.bubble_view,statusDescription:{markup:a.status_description}}}function J(a){var c=I({amount:a.amount,transaction_amount:a.transaction_amount,requester:a.requester,requestee:a.requestee,request_status:a.request_status,request_theme:a.request_theme,id:a.id,memo_text:a.memo_text,transfer:a.transfer,creation_time:a.creation_time,group_thread_fbid:a.group_thread_fbid,updated_time:a.updated_time,bubble_view:a.bubble_view,status_description:a.status_description});a={individualRequests:b("bs_array").map(I,a.individual_requests)};return Object.assign(c,a)}function K(a,c,d){__p&&__p();var e=c.media,f=e==null?null:e.animated_image,g=e==null?null:e.image,h={};b("bs_array").iter(function(b){var a=b.value;h[b.key]=a==null?null:a.text;return 0},c.properties);var y=c.target,I;if(y==null)I=null;else switch(y.tag|0){case 0:I=F(y[0]);break;case 1:I=G(y[0]);break;case 2:I=H(y[0]);break;case 3:I=J(y[0]);break;case 4:I=C(a,y[0]);break;case 7:I=A(y[0]);break;case 8:I=z(y[0]);break;case 10:I=D(y[0]);break;case 11:I=u(y[0]);break;case 12:I=E(a,y[0]);break;case 13:I=r(y[0]);break;case 14:I=s(y[0]);break;case 15:I=t(y[0]);break;case 16:var K=y[0],M=K.genie_sender;M=M==null?[null,null]:[M.messaging_actor.id,M.messaging_actor.name];var N=M[0],O={action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,deduplication_key:null,description:null,media:null,properties:[],source:null,style_list:[],title_with_entities:null,url:null,subattachments:[],target:null},P=c.media,Q;if(P==null)Q=null;else{P=P.pack;if(P==null){P=K.story_attachment;Q=!(P==null)&&!(d==null)?L(a,{legacy_attachment_id:N,story_attachment:{action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,deduplication_key:d.deduplication_key,description:d.description,media:d.media,properties:d.properties,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,url:d.url,subattachments:d.subattachments,target:d.target},genie_attachment:{genie_message:{story_attachment:O}}}):null}else Q=d==null?null:L(a,{legacy_attachment_id:N,story_attachment:O,genie_attachment:{genie_message:{story_attachment:O}}})}I={genie_id:N,genie_name:M[1],attachment:Q};break;case 18:I=l(y[0]);break;case 20:I=q(y[0]);break;case 21:I=m(y[0]);break;case 22:I=n(y[0]);break;case 23:I=B(y[0]);break;case 25:I=k(y[0]);break;case 26:I=j(a,y[0]);break;case 40:I=v(y[0]);break;case 41:I=w(y[0]);break;case 42:I=x(y[0]);break;case 43:I=o(y[0]);break;case 44:I=p(y[0]);break;default:I=y[0]}K=c.target;P=!(K==null)&&K.tag===7?0:null;d=c.description;O=c.source;N=c.title_with_entities;return{description:d==null?null:d.text,media:{animated_image:f==null?null:f.uri,animated_image_size:f==null?{height:null,width:null}:{height:f.height,width:f.width},image:g==null?null:g.uri,image_size:g==null?{height:null,width:null}:{height:g.height,width:g.width},duration:e==null?null:e.playable_duration,playable:e==null?null:e.is_playable,source:e==null?null:e.playable_url},source:O==null?null:O.text,style_list:c.style_list,title:N==null?null:N.text,action_links:i(c.action_links),messaging_attribution:c.messaging_attribution,messenger_ctas:b("bs_array").map(function(a){return{id:a.id,page_id:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.page_id),""),action_title:a.title,action_url:a.action_link,action_open_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),is_high_confidence:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.is_high_confidence),!1),is_mutable_by_server:a.is_mutable_by_server,native_url:a.native_url,is_disabled:a.is_disabled,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button}}},c.messenger_call_to_actions),xma_layout_info:c.xma_layout_info,properties:h,uri:c.url,deduplication_key:c.deduplication_key,target:I,label:P}}function L(a,c){__p&&__p();var d=c.genie_attachment,e;if(d==null)e=null;else{d=d.genie_message;if(d==null)e=null;else{d=d.story_attachment;e=d==null?null:{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}}}d=c.story_attachment;var f;if(d==null)f=null;else{var g={description:null,media:null,source:null,style_list:[],title_with_entities:null,properties:[],url:null,deduplication_key:null,action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,target:null,subattachments:[]};c={share_id:c.legacy_attachment_id,subattachments:b("bs_array").map(function(b){return K(a,b,g)},d.subattachments)};var h={description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target};d=e==null?{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}:{description:e.description,media:e.media,source:e.source,style_list:e.style_list,title_with_entities:e.title_with_entities,properties:e.properties,url:e.url,deduplication_key:e.deduplication_key,action_links:e.action_links,messaging_attribution:e.messaging_attribution,messenger_call_to_actions:e.messenger_call_to_actions,xma_layout_info:e.xma_layout_info,target:e.target,subattachments:e.subattachments};f=Object.assign(c,K(a,h,d))}return{app_attribution:null,attach_type:b("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:f,thumbnail_url:null}}f._getCallToActions=h;f._getActionLinks=i;f._getColor=a;f._getLogo=c;f._getPageTarget=j;f._getGroupCommerceProductItemTarget=k;f._getExternalSongTarget=l;f._getAgentSuggestionItemTarget=m;f._getFundraiserTarget=n;f._getWECFileTarget=o;f._getWECMessageVideoTarget=p;f._getRetailItemTarget=q;f._getPagesPlatformBookingMessageTarget=r;f._getServicesAppointmentAvailabilityTarget=s;f._getServicesGenericAdminTextTarget=t;f._getMessageLiveLocationTarget=u;f._getWECMessageTarget=v;f._getWECMessageImageTarget=w;f._getWECMessageAudioTarget=x;f._getBusinessRetailItem=y;f._getMessengerBusinessMessageTarget=z;f._getMessengerRetailPromotionTarget=A;f._getMessengerRetailReceiptTarget=B;f._getPagesPlatformAttachmentTarget=C;f._getPagesPlatformLeadGenInfoTarget=D;f._getQuickInviteTarget=E;f._getCrisisListingTarget=F;f._getMoneyTransferTarget=G;f._getP2PTransferTarget=H;f._getP2PTransferRequestTarget=I;f._getP2PTransferRequestWithIndividualRequests=J;f.transformStoryAttachment=K;f.getExtensibleAttachmentPayload=L}),null);
__d("MessengerMessageTransformer.bs",["bs_array","bs_block","bs_string","FBIDCheck","getByPath","MercuryIDs","bs_caml_format","CurrentUser","bs_js_primitive","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","MessageUnsendabilityStatus.bs","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();a=a.blob_attachments;var c=[];a==null||b("bs_array").iter(function(a){__p&&__p();if(a.__typename==="MessageImage"){c.push(b("bs_block").__(0,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,blurred_image_uri:a.blurred_image_uri,filename:a.filename,id:a.id,preview:a.preview,large_preview:a.large_preview,thumbnail:a.thumbnail,legacy_attachment_id:a.legacy_attachment_id,original_dimensions:a.original_dimensions,original_extension:a.original_extension,render_as_sticker:a.render_as_sticker,photo_encodings:a.photo_encodings}]));return 0}else if(a.__typename==="MessageAnimatedImage"){c.push(b("bs_block").__(1,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,animated_image:a.animated_image,legacy_attachment_id:a.legacy_attachment_id,preview_image:a.preview_image,original_dimensions:a.original_dimensions}]));return 0}else if(a.__typename==="MessageAudio"){c.push(b("bs_block").__(2,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,is_voicemail:a.is_voicemail,audio_type:a.audio_type,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else if(a.__typename==="MessageVideo"){c.push(b("bs_block").__(3,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,legacy_attachment_id:a.legacy_attachment_id,chat_image:a.chat_image,video_type:a.video_type,original_dimensions:a.original_dimensions,large_image:a.large_image,inbox_image:a.inbox_image}]));return 0}else if(a.__typename==="MessageFile"){c.push(b("bs_block").__(4,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,url:a.url,mimetype:a.mimetype,content_type:a.content_type,is_malicious:a.is_malicious,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else return 0},a);return c}function h(a,c,d){var e=c.call_capture_attachments;if(e==null)return[];else return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:null,blob_attachments:g({blob_attachments:b("bs_array").map(function(a){return a.node},e.edges)}),sticker:null},c.message_id,d)}function i(a,c,d,e,f){__p&&__p();if(c.__typename==="GroupPollExtensibleMessageAdminText"){var g=c.question,i;if(g==null)i=[{},null];else{var j=Object.assign({},g);Object.assign(j,{total_count:c.total_count,options:b("bs_array").map(function(a){var c=Object.assign({},a);return Object.assign(c,{total_count:a.voters.nodes.length,voters:b("bs_array").map(function(a){return a.id},a.voters.nodes)})},g.options.nodes)});i=[j,g.id]}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{event_type:b("bs_string").lowercase(c.event_type),question_id:i[1],question_json:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(JSON.stringify(i[0])))}}}else if(c.__typename==="InstantGameUpdateExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{game_id:b("getByPath")(c,["game","id"]),update_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("InstantGameUpdateXMATUpdateType")[c.update_type])),collapsed_text:c.collapsed_text,expanded_text:c.expanded_text,leaderboard_json:c.leaderboard_json,cta_url:b("getByPath")(c,["instant_game_update_data","cta_url"]),cta_title:b("getByPath")(c,["instant_game_update_data","cta_title"]),custom_image_url:b("getByPath")(c,["instant_game_update_data","photo","image","uri"]),template:b("getByPath")(c,["instant_game_update_data","template"])}};else if(c.__typename==="MessengerAdContextAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{ad_url:c.ad_url}};else if(c.__typename==="AdExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{ad_client_token:c.ad_client_token,ad_id:c.ad_id,ad_preferences_link:c.ad_preferences_link,ad_properties:c.ad_properties}};else if(c.__typename==="MessengerCallLogExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:Object.assign(Object.assign({},c),{call_capture_attachments:h(a,c,f)})};else if(c.__typename==="ThemeColorExtensibleMessageAdminText"||c.__typename==="ThreadIconExtensibleMessageAdminText"||c.__typename==="ThreadNicknameExtensibleMessageAdminText"||c.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||c.__typename==="AddContactExtensibleMessageAdminText"||c.__typename==="RtcCallLogExtensibleMessageAdminText"||c.__typename==="GameScoreExtensibleMessageAdminText"||c.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||c.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||c.__typename==="PartiesInviteExtensibleMessageAdminText"||c.__typename==="AppointmentReminderExtensibleMessageAdminText"||c.__typename==="LinkCTAExtensibleMessageAdminText"||c.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||c.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidNewExtensibleMessageAdminText"||c.__typename==="WorkBotInstalledExtensibleMessageAdminText"||c.__typename==="WorkChatReminderLinkCTAExtensibleMessageAdminText"||c.__typename==="PageThreadActionSystemAddDetailsXMAT"||c.__typename==="PostSharedFromGroupExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:Object.assign({},c)};else if(c.__typename==="LightweightEventCreateExtensibleMessageAdminText"||c.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||c.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){g=c.event_reminder;if(g==null)i=void 0;else{a=g.lightweight_event_creator;f=a==null?void 0:a.id;a=g.location_page;a=a==null?void 0:a.id;var k=g.timezone_id;k=k==null?void 0:k.timezone;var l=g.location_coordinates;l=l==null?{latitude:void 0,longitude:void 0}:l;var m=g.event_reminder_members;m=m==null?void 0:m.edges;i={event_creator_id:f,event_id:g.id,event_location_id:a,event_location_name:g.location_name,event_seconds_to_notify_before:g.seconds_to_notify_before,event_time:g.time,event_end_time:g.end_time,event_timezone:k,event_title:g.event_title,event_type:g.lightweight_event_type,event_track_rsvp:g.allows_rsvp,latitude:l.latitude,longitude:l.longitude,guest_state_list:m,guest_id:c.guest_id,guest_status:c.guest_status}}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:i}}else j=c.__typename==="AdReplyMessageAdminText"?{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{ad_url:c.ad_url,should_show_url:c.should_show_url}}:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:void 0};return{log_message_body:e,log_message_data:j,log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function j(a){return b("bs_array").map(function(a){if(a==="p2p_transfer")return b("StoryAttachmentStyle").ORION;else if(a==="p2p_payment_request")return b("StoryAttachmentStyle").ORION_REQUEST;else return a},a)}function k(a){__p&&__p();var c=a.target,d;if(c==null)d=null;else if(c.__typename==="CrisisListing")d=b("bs_block").__(0,[{listing_type:c.listing_type,listing_category:c.listing_category,map_image:c.map_image}]);else if(c.__typename==="MoneyTransfer")d=b("bs_block").__(1,[{sender:c.sender,receiver:c.receiver,transfer_id:c.transfer_id,bubble_view:c.bubble_view}]);else if(c.__typename==="PeerToPeerTransfer")d=b("bs_block").__(2,[{sender:c.sender,receiver_profile:c.receiver_profile,transaction_amount:c.transaction_amount,transfer_status:c.transfer_status,transfer_id:c.transfer_id,completedTime:c.completedTime,updatedTime:c.updatedTime,creationTime:c.creationTime,transfer_context:c.transfer_context,amount_fb_discount:c.amount_fb_discount,funds_availability:c.funds_availability,group_thread_fbid:c.group_thread_fbid,platform_item:c.platform_item,id:c.id,status_description:c.status_description,bubble_view:c.bubble_view,currency_amount:c.currency_amount}]);else if(c.__typename==="PeerToPeerPaymentRequest")d=b("bs_block").__(3,[{amount:c.amount,transaction_amount:c.transaction_amount,requester:c.requester,requestee:c.requestee,request_status:c.request_status,request_theme:c.request_theme,id:c.id,memo_text:c.memo_text,transfer:c.transfer,creation_time:c.creation_time,group_thread_fbid:c.group_thread_fbid,updated_time:c.updated_time,status_description:c.status_description,bubble_view:c.bubble_view,individual_requests:c.individual_requests}]);else if(c.__typename==="PaymentPlatformAttachment")d=b("bs_block").__(4,[{payment_modules_client:c.payment_modules_client,is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list,components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,invoicer_id:c.invoicer_id}]);else if(c.__typename==="MomentsAppMessengerInvitation")d=b("bs_block").__(5,[{snippet:c.snippet}]);else if(c.__typename==="MomentsAppMessengerPhotoRequest")d=b("bs_block").__(6,[{snippet:c.snippet}]);else if(c.__typename==="MessengerRetailPromotion")d=b("bs_block").__(7,[{message:c.message,call_to_actions:c.call_to_actions,promotion_items:c.promotion_items}]);else if(c.__typename==="MessengerBusinessMessage")d=b("bs_block").__(8,[{message:c.message,call_to_actions:c.call_to_actions,business_items:c.business_items}]);else if(c.__typename==="Video")d=b("bs_block").__(9,[{video_id:c.video_id,video_messenger_cta_payload:c.video_messenger_cta_payload}]);else if(c.__typename==="PagesPlatformLeadGenInfo")d=b("bs_block").__(10,[{field_data_list:c.field_data_list}]);else if(c.__typename==="MessageLiveLocation")d=b("bs_block").__(11,[{live_location_id:c.live_location_id,is_expired:c.is_expired,expiration_time:c.expiration_time,sender:c.sender,coordinate:c.coordinate,location_title:c.location_title,sender_destination:c.sender_destination,stop_reason:c.stop_reason}]);else if(c.__typename==="QuickInvite")d=b("bs_block").__(12,[{id:c.id,invite_sender:c.invite_sender,invite_recipient:c.invite_recipient}]);else if(c.__typename==="PagesPlatformBookingMessage")d=b("bs_block").__(13,[{id:c.id,page:c.page,message_bubble_type:c.message_bubble_type,user:c.user,native_component_flow_request:c.native_component_flow_request}]);else if(c.__typename==="ServicesAppointmentAvailability")d=b("bs_block").__(14,[{id:c.id,page:c.page,consumer:c.consumer,formatted_available_time_ranges:c.formatted_available_time_ranges,has_booking_request_created:c.has_booking_request_created}]);else if(c.__typename==="ServicesGenericAdminText")d=b("bs_block").__(15,[{id:c.id}]);else if(c.__typename==="GenieMessage")d=b("bs_block").__(16,[{genie_sender:c.genie_sender,story_attachment:c.story_attachment}]);else if(c.__typename==="Event")d=b("bs_block").__(17,[{eventID:c.eventID,guestStatus:c.guestStatus,canViewerJoin:c.canViewerJoin,timeString:c.timeString,event_place:c.event_place,social_context:c.social_context,watchStatus:c.watchStatus,connection_style:c.connection_style,canViewerWatch:c.canViewerWatch,profile_picture:c.profile_picture,name:c.name,start_timestamp:c.start_timestamp}]);else if(c.__typename==="ExternalSong")d=b("bs_block").__(18,[{application_name:c.application_name,artist_names:c.artist_names,audio_url:c.audio_url,duration_ms:c.duration_ms,music_title:c.music_title}]);else if(c.__typename==="LightweightAction")d=b("bs_block").__(19,[{lwa_state:c.lwa_state,lwa_type:c.lwa_type}]);else if(c.__typename==="MessengerRetailItem")d=b("bs_block").__(20,[{id:c.id,name:c.name,desc:c.desc,thumb_url:c.thumb_url,item_url:c.item_url,source:c.source,image_aspect_ratio:c.image_aspect_ratio,first_metaline:c.first_metaline,second_metaline:c.second_metaline,third_metaline:c.third_metaline,default_action:c.default_action,call_to_actions:c.call_to_actions}]);else if(c.__typename==="AgentItemSuggestion")d=b("bs_block").__(21,[{id:c.id,desc:c.desc,total_cost:c.total_cost,merchant_name:c.merchant_name,target_url:c.target_url,thumb_url:c.thumb_url,raw_amount:c.raw_amount,payment:c.payment,price_amount:c.price_amount,price_currency:c.price_currency,name:c.name}]);else if(c.__typename==="FundraiserPersonToCharity"||c.__typename==="FundraiserPersonForPerson"){var e=c.fundraiser_detailed_progress_text,f=c.fundraiser_subtitle_text,g=c.focused_cover_photo;d=b("bs_block").__(22,[{fundraiserID:c.id,canDonate:c.can_donate,hasViewerDonated:c.has_viewer_donated,fundraiserDetailedProgressText:e==null?null:e.text,fundraiserSubtitleText:f==null?null:f.text,focusedCoverPhoto:g==null?null:{src:g.photo.image.uri,data:{height:g.photo.image.height,width:g.photo.image.width}}}])}else d=c.__typename==="MessengerRetailReceipt"?b("bs_block").__(23,[{account_holder_name:c.account_holder_name,adjustments:c.retail_adjustments,cancellation_url:c.cancellation_url,items:c.retail_items,merchant_name:c.merchant_name,messenger_commerce_bubble_type:c.bubble_type,order_id:c.receipt_id,order_time:c.order_time_for_display,order_url:c.receipt_url,payment_method:c.order_payment_method,receipt_id:c.id,recipient_name:c.recipient_name,shipping_cost:c.shipping_cost,shipping_method:c.shipping_method,status:c.status,structured_address:c.structured_address,subtotal:c.subtotal,total_cost:c.total,total_tax:c.tax,partner_logo:c.partner_log}]):c.__typename==="JobApplication"?b("bs_block").__(24,[{id:c.id}]):c.__typename==="GroupCommerceProductItem"?b("bs_block").__(25,[{group_commerce_item_description:c.group_commerce_item_description,group_commerce_item_seller:c.group_commerce_item_seller,formatted_price:c.formatted_price,group_commerce_item_title:c.group_commerce_item_title,primary_photo:c.primary_photo,url:c.url}]):c.__typename==="Page"?b("bs_block").__(26,[{address:c.address,top_category_name:c.top_category_name,cover_photo:c.cover_photo,location:c.location,name:c.name,overall_star_rating:c.overall_star_rating,id:c.id,price_range_description:c.price_range_description}]):c.__typename==="MessengerEventReminder"?b("bs_block").__(27,[{is_active:c.is_active,event_title:c.event_title,time:c.time}]):c.__typename==="FormProgressStoryAttachment"?b("bs_block").__(54,[{progress:c.progress,url:c.url}]):c.__typename==="AirlineBoardingPassCollectionMessageAttachment"?b("bs_block").__(28,[{tint_color:c.tint_color,logo:c.logo,flight_label:c.flight_label,boarding_time_label:c.boarding_time_label,departure_label:c.departure_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,flight_terminal_label:c.flight_terminal_label,flight_gate_label:c.flight_gate_label,view_boarding_pass_cta_label:c.view_boarding_pass_cta_label,boarding_passes:c.boarding_passes,share_cta_label:c.share_cta_label,message_cta_label:c.message_cta_label,boarding_pass_title_label:c.boarding_pass_title_label,boarding_pass_error_title_label:c.boarding_pass_error_title_label}]):c.__typename==="AirlineCheckInReminderMessageAttachment"?b("bs_block").__(29,[{pnr_number:c.pnr_number,tint_color:c.tint_color,checkin_url:c.checkin_url,booking_number_label:c.booking_number_label,flight_label:c.flight_label,arrival_time_label:c.arrival_time_label,departure_time_label:c.departure_time_label,checkin_cta_label:c.checkin_cta_label,logo:c.logo,flight_infos:c.flight_infos}]):c.__typename==="AirlineUpdateMessageAttachment"?b("bs_block").__(30,[{pnr_number:c.pnr_number,tint_color:c.tint_color,update_type:c.update_type,departure_time_label:c.departure_time_label,arrival_time_label:c.arrival_time_label,booking_number_label:c.booking_number_label,flight_gate_label:c.flight_gate_label,flight_label:c.flight_label,flight_status_label:c.flight_status_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,logo:c.logo,flight_info:c.flight_info,hightlighted_labels:c.hightlighted_labels}]):c.__typename==="AirlineItineraryMessageAttachment"?b("bs_block").__(31,[{confirmation_number:c.confirmation_number,pnr_number:c.pnr_number,tint_color:c.tint_color,formatted_total:c.formatted_total,itemized_price_infos:c.itemized_price_infos,formatted_tax:c.formatted_tax,formatted_base_price:c.formatted_base_price,passenger_infos:c.passenger_infos,logo:c.logo,aircraft_type_label:c.aircraft_type_label,arrival_time_label:c.arrival_time_label,base_price_label:c.base_price_label,booking_number_label:c.booking_number_label,cabin_type_label:c.cabin_type_label,departure_time_label:c.departure_time_label,flight_confirmation_label:c.flight_confirmation_label,flight_date_label:c.flight_date_label,flight_label:c.flight_label,flight_terminal_label:c.flight_terminal_label,itinerary_error_title_label:c.itinerary_error_title_label,itinerary_title_label:c.itinerary_title_label,passenger_name_label:c.passenger_name_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,purchase_summary_label:c.purchase_summary_label,taxes_label:c.taxes_label,total_label:c.total_label,view_details_cta_label:c.view_details_cta_label,itinerary_legs:c.itinerary_legs}]):c.__typename==="MessengerRetailShipmentTrackingEvent"?b("bs_block").__(32,[{id:c.id,shipment:c.shipment,tracking_event_time_for_display:c.tracking_event_time_for_display,shipment_tracking_event_type:c.shipment_tracking_event_type,messenger_commerce_location:c.messenger_commerce_location,tracking_event_description:c.tracking_event_description,bubble_type:c.bubble_type}]):c.__typename==="MessengerRetailShipment"?b("bs_block").__(33,[{id:c.id,tracking_number:c.tracking_number,shipdate_for_display:c.shipdate_for_display,estimated_delivery_time_for_display:c.estimated_delivery_time_for_display,commerce_origin:c.commerce_origin,commerce_destination:c.commerce_destination,retail_carrier:c.retail_carrier,shipment_tracking_events:c.shipment_tracking_events,receipt:c.receipt,recipient:c.recipient,retail_shipment_items:c.retail_shipment_items,bubble_type:c.bubble_type}]):c.__typename==="TicketOrderAttachment"?b("bs_block").__(35,[{ticket_order_id:c.ticket_order_id,ticket_order:c.ticket_order,event:c.event}]):c.__typename==="EventTicketRequest"?b("bs_block").__(36,[{id:c.id,guest_notes:c.guest_notes,event:c.event}]):c.__typename==="EventAttendanceConfirmation"?b("bs_block").__(37,[{id:c.id,num_guests:c.num_guests,attendee_answers:c.attendee_answers,event:c.event}]):c.__typename==="LeadGenDeepLinkData"?b("bs_block").__(34,[{id:c.id,cover_image:c.cover_image,headline:c.headline,name:c.name,page:c.page}]):c.__typename==="UserLeadGenInfo"?b("bs_block").__(38,[{id:c.id,field_data:c.field_data}]):c.__typename==="WECMessageAudio"?b("bs_block").__(42,[{id:c.id,filename:c.filename,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,duration:c.duration}]):c.__typename==="IceBreakerMessageAttachment"?b("bs_block").__(39,[{ice_breaker_title:c.ice_breaker_title,ice_breaker_messages:c.ice_breaker_messages,ad_id:c.ad_id}]):c.__typename==="WECMessage"?b("bs_block").__(40,[{sender_wec_number:c.sender_wec_number,sender_wec_number_formated:c.sender_wec_number_formated,sender_wec_number_fbid:c.sender_wec_number_fbid,sender_wec_name:c.sender_wec_name}]):c.__typename==="WECMessageImage"?b("bs_block").__(41,[{id:c.id,extension:c.extension,preview:c.preview,large_preview:c.large_preview}]):c.__typename==="WECMessageFile"?b("bs_block").__(43,[{id:c.id,name:c.name,is_malicious:c.is_malicious,uri:c.uri,extension:c.extension,filesize:c.filesize}]):c.__typename==="WECMessageVideo"?b("bs_block").__(44,[{id:c.id,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,filename:c.filename,height:c.height,width:c.width}]):c.__typename==="MontageDirect"?b("bs_block").__(45,[{message_state:c.message_state,is_keep_disabled:c.is_keep_disabled,blob_media_type:c.blob_media_type,blob_media:c.blob_media,image:c.image}]):c.__typename==="MBirthdayReminderAttachment"?b("bs_block").__(46,[{friend_id:c.friend_id,confidence:c.confidence,birthday_date:c.birthday_date}]):c.__typename==="MPersonalRemindersList"?b("bs_block").__(47,[{has_more_upcoming_reminders:c.has_more_upcoming_reminders,personal_reminders:c.personal_reminders}]):c.__typename==="MentorshipMessengerCurriculumStep"?b("bs_block").__(48,[{id:c.id,module_name:c.module_name,mentorship_program:c.mentorship_program,program_name:c.program_name,curriculum_message:c.curriculum_message,prompt:c.prompt,step_count:c.step_count,total_steps:c.total_steps}]):c.__typename==="MentorshipMessengerDiscussionTopicSet"?b("bs_block").__(49,[{id:c.id,topics:c.topics}]):c.__typename==="MentorshipMessengerLeavePrompt"?b("bs_block").__(50,[{mentorship_program:c.mentorship_program,id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerReminder"?b("bs_block").__(51,[{id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerSurvey"?b("bs_block").__(52,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_disclaimer:c.xma_disclaimer,mentorship_program:c.mentorship_program}]):c.__typename==="MentorshipMessengerProgressTracker"?b("bs_block").__(53,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_body:c.xma_body}]):c.__typename==="Story"?b("bs_block").__(55,[{title:c.title,description:c.description,actors:c.actors,to:c.to,attachments:c.attachments,attached_story:c.attached_story}]):c.__typename==="User"?b("bs_block").__(56,[{type:c.__typename,id:c.id,name:c.name,profile_picture:c.profile_picture,cover_photo:c.cover_photo,work_info:c.work_info,subscribe_status:c.subscribe_status}]):c.__typename==="Group"?b("bs_block").__(57,[{type:c.__typename,id:c.id,name:c.name,cover_photo:c.cover_photo,visibility:c.visibility,visibility_sentence:c.visibility_sentence,viewer_join_state:c.viewer_join_state,group_general_chat:c.group_general_chat,work_groups_sync_metadata:c.work_groups_sync_metadata}]):c.__typename==="AppContent"?b("bs_block").__(58,[{type:c.__typename,attachment_icon:c.attachment_icon,privacy_status:c.privacy_status}]):null;return{description:a.description,media:a.media,source:a.source,style_list:j(a.style_list),title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:d}}function l(a){var c=k({description:a.description,media:a.media,source:a.source,style_list:a.style_list,title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:a.target});if(c==null)return null;else{a=b("bs_array").map(k,a.subattachments);return Object.assign({subattachments:a},c)}}function m(a){__p&&__p();a=a.message;if(a==null)return[];else{var c=[];b("bs_array").iter(function(a){__p&&__p();var b=a.entity;if(b==null)return 0;else{var d=b.id;b=b.thread_key;if(d==null)if(b==null)return 0;else{b=b.thread_fbid;if(b==null)return 0;else{c.push({id:b,offset:a.offset,length:a.length,type:a.__typename});return 0}}else{c.push({id:d,offset:a.offset,length:a.length,type:a.__typename});return 0}}},a.ranges);return c}}function n(a,c,d,e){__p&&__p();var f={};b("bs_array").iter(function(a){f[a.user.id]=a.reaction;return 0},c.message_reactions);var j=b("FBIDCheck").isUser_deprecated(c.message_sender.id),k=j?b("MessagingTagUtils").getSourceFromTags(c.tags_list):b("MessagingSourceEnum").UNKNOWN;j=j?b("MessagingTagUtils").getSourceTags(c.tags_list,k):[];var o=c.message_id,p=d.thread_id,q=d.thread_fbid,r=d.other_user_fbid;r=p==null?q==null?r==null?null:b("MercuryIDs").getThreadIDFromUserID(r):b("MercuryIDs").getThreadIDFromThreadFBID(q):p;q=c.tags_list.some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT});p=c.commerce_message_type;var s=c.customizations,t=c.replied_to_message,u;if(t==null)u=null;else{var v=t.message;u=v==null?{status:t.status,message:null}:{status:t.status,message:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").some(n(a,v,d,e)))}}t=c.error_data;v=c.unsent_timestamp_precise;v=!(v==null)&&v!=="0"?b("bs_js_null_undefined").fromOption(b("bs_caml_format").caml_float_of_string(v)):null;var w=c.unsender;r={thread_id:r,thread_fbid:d.thread_fbid,other_user_fbid:d.other_user_fbid,action_type:c.__typename==="UserMessage"?b("MercuryActionType").USER_GENERATED_MESSAGE:b("MercuryActionType").LOG_MESSAGE,message_id:o,threading_id:null,offline_threading_id:c.offline_threading_id,author:b("MercuryIDs").getParticipantIDFromUserID(c.message_sender.id),author_email:c.message_sender.email,ephemeral_ttl_mode:c.ttl,timestamp:b("bs_caml_format").caml_float_of_string(c.timestamp_precise),is_unread:c.unread,is_filtered_content:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT)!==-1,is_filtered_content_bh:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_BH)!==-1,is_filtered_content_account:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1,is_filtered_content_quasar:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1,is_filtered_content_invalid_app:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1,is_sponsored:c.is_sponsored,is_one_way_sent:c.tags_list.some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),ad_id:c.ad_id,ad_client_token:c.ad_client_token,commerce_message_type:p==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceMessageType")[p])),customizations:s==null?[]:s,source:k,source_tags:j,tags:c.tags_list,is_spoof_warning:c.tags_list.indexOf(b("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||c.tags_list.indexOf(b("MessagingTag").SPAM_SPOOFING)!==-1||c.tags_list.indexOf(b("MessagingTag").SPOOF_WARNING)!==-1,folder:d.folder,platform_xmd:c.platform_xmd_encoded,m_suggestions:c.m_suggestions,message_source:c.message_source_data,montage_reply_data:c.montage_reply_data,replied_to_message:u,skip_bump_thread:!1,profile_ranges:m(c),reactions:f,error_data:t==null?null:{description:t.description},removed_timestamp:v,unsender:w==null?null:{id:b("MercuryIDs").getParticipantIDFromUserID(w.messaging_actor.id),name:w.messaging_actor.name,short_name:w.messaging_actor.short_name},verse_group_role_xmd:c.verse_group_role_xmd,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.message_unsendability_status),has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null,is_forwarded:q,preview_attachments:null};if(c.__typename==="UserMessage"){p=g(c);s=c.extensible_attachment;if(s==null)k=null;else{j=s.story_attachment;u=s.genie_attachment;if(u==null)t=null;else{v=u.genie_message;if(v==null)w=null;else{q=v.story_attachment;w={story_attachment:q==null?null:l(q)}}t={genie_message:w}}k={legacy_attachment_id:s.legacy_attachment_id,story_attachment:j==null?null:l(j),genie_attachment:t}}u=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:k,blob_attachments:p,sticker:c.sticker},o,e);v=c.message;q=c.page_admin_sender;Object.assign(r,{body:v==null?null:v.text,creator_info:q==null?null:{creatorID:q.admin_id,creatorName:q.name,creatorType:q.sender_type,labelType:q.label_type,pageID:q.page_id,profileURI:q.profile_uri},subject:null,has_attachment:u.length>0,attachments:u,raw_attachments:null,ranges:void 0,meta_ranges:c.meta_ranges.map(function(a){return babelHelpers["extends"]({},a,{data:JSON.parse(a.data)})})})}else if(c.__typename==="VoiceCallMessage"||c.__typename==="VideoCallMessage"){w=c.__typename;s=w==="VoiceCallMessage"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;j=c.message_sender.id;t=d.other_user_fbid;k=t==null?null:b("MercuryIDs").getParticipantIDFromUserID(j===t?b("CurrentUser").getID():t);p=c.answered;Object.assign(r,{log_message_type:s,log_message_data:{answered:p==null?!1:p,call_capture_attachments:h(a,c,e),caller:b("MercuryIDs").getParticipantIDFromUserID(j),callee:k},log_message_body:c.snippet})}else if(c.__typename==="ThreadNameMessage")Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:c.thread_name},log_message_body:c.snippet});else if(c.__typename==="ThreadImageMessage"){o=c.image_with_metadata;if(o==null)v=null;else{q=o.preview;v={preview_url:q==null?null:q.uri,metadata:{fbid:o.legacy_attachment_id,dimensions:String(o.original_dimensions.x)+(","+String(o.original_dimensions.y))}}}Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:v},log_message_body:c.snippet})}else if(c.__typename==="ParticipantsAddedMessage"){u=c.participants_added;Object.assign(r,{log_message_type:b("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:u==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},u)},log_message_body:c.snippet})}else if(c.__typename==="ParticipantLeftMessage"){w=c.participants_removed;Object.assign(r,{log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:w==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},w)},log_message_body:c.snippet})}else if(c.__typename==="GenericAdminTextMessage"){d=c.extensible_message_admin_text;t=c.extensible_message_admin_text_type;d==null?t==null||Object.assign(r,{log_message_body:c.snippet,log_message_data:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[t])),untypedData:void 0},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}):t==null||Object.assign(r,i(a,d,t,c.snippet,e))}else if(c.__typename==="P2PPaymentRequestMessage"||c.__typename==="P2PPaymentMessage"){s=c.p2p_sender;p=c.p2p_receiver;j=c.amount;k=c.message_type;Object.assign(r,{log_message_body:c.snippet,log_message_data:{transfer_id:c.transfer_id,senderId:s==null?null:b("MercuryIDs").getParticipantIDFromUserID(s.id),receiverId:p==null?null:b("MercuryIDs").getParticipantIDFromUserID(p.id),formattedAmount:j==null?null:j.formatted,subtype:k==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentLogMessageSubtype")[k]))},log_message_type:b("MercuryLogMessageType").ORION})}return r}f.unsafeCastBlobAttachments=g;f._getCallCaptureAttachments=h;f._getGenericAdminTextMessage=i;f._getStyleList=j;f.unsafeCastExtensibleAttachmentWithoutSubattachments=k;f.unsafeCastExtensibleAttachment=l;f._getProfileRanges=m;f.transformMessage=n}),null);
__d("MessengerPaperclipIconSVGM4React.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement("svg",{className:"_7oal",height:"36px",width:"36px",viewBox:"0 0 36 36"},b("React").createElement("g",{fill:"none",fillRule:"evenodd"},b("React").createElement("polygon",{points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{d:"M18,31 C13.5815,31 10,27.4185 10,23 L10,11 C10,7.6865 12.6865,5 16,5 C19.3135,5 22,7.6865 22,11 L22,21 C22,23.209 20.209,25 18,25 C15.791,25 14,23.209 14,21 L14,14.5 C14,13.6715 14.6715,13 15.5,13 C16.3285,13 17,13.6715 17,14.5 L17,21 C17,21.552 17.448,22 18,22 C18.552,22 19,21.552 19,21 L19,11 C19,9.3435 17.6565,8 16,8 C14.3435,8 13,9.3435 13,11 L13,23 C13,25.761 15.239,28 18,28 C20.761,28 23,25.761 23,23 L23,14.5 C23,13.6715 23.6715,13 24.5,13 C25.3285,13 26,13.6715 26,14.5 L26,23 C26,27.4185 22.4185,31 18,31",fill:a})))}f.make=a}),null);
__d("MessengerPaperclipIconSVGM4React.re",["MessengerPaperclipIconSVGM4React.bs"],(function(a,b,c,d,e,f){a=function(a){a=b("MessengerPaperclipIconSVGM4React.bs").make(a.fill);return a};f.make=a}),null);
__d("MessengerParticipantUtils.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(a);a=d.participants.filter(function(a){return b("bs_caml_obj").caml_notequal(a,e)});return a.filter(function(a){return b("bs_belt_Set").has(c,a)})}d=b("bs_belt_Set").has;function h(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function a(a,b,c){return h(a,b,c).length>0}function c(a,b,c){return g(a,b,c).length>0}f.findIntersection=g;f.has=d;f.participantsInGroupThread=h;f.areParticipantsInGroupThread=a;f.areParticipantsInThread=c}),null);
__d("MessengerThreadCannotReplyReason.bs",["bs_js_primitive","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return void 0;else return b("bs_js_primitive").undefined_to_opt(b("MessengerThreadCannotReplyReason")[a])}function c(a){if(a==null)return null;else if(a!==0)switch(a-1|0){case 0:return b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE;case 1:return b("MessengerThreadCannotReplyReason").BLOCKED;case 2:return b("MessengerThreadCannotReplyReason").MESSENGER_BLOCKEE}else return b("MessengerThreadCannotReplyReason").BLOCKED}f.fromName=a;f.fromMessageThreadCannotReplyReason=c}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","URI","FBID.bs","bs_array","bs_string","bs_js_json","getByPath","bs_caml_array","ChatConfig","MercuryIDs","bs_belt_Option","bs_caml_format","CurrentUser","GenderConst","bs_js_primitive","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","isMessengerDotComURI","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupAdminType","MessengerGroupsSyncStatus.bs","MessengerGroupThreadSubType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerGroupAdminModelStatus.bs","MessengerObjectAssociationType","MessageThreadUnsendabilityStatus.bs","MessengerThreadCannotReplyReason","MessengerThreadCannotReplyReason.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function i(a){__p&&__p();a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("CurrentUser").isWorkUser();d=e?c:new(b("URI"))(c).setDomain("www.facebook.com")}e=a.profile_picture;c=a.group_general_chat;var f=a.group_events,g=a.group_saves,h=a.verse_group_link;return{id:a.id,name:a.name,action_link:d,profile_picture:e==null?null:{uri:e.uri},group_general_chat:c==null?null:{id:c.id},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program,group_events:f==null?{count:0}:{count:f.count},group_saves:g==null?{count:0}:{count:g.count},verse_group_link:h==null?null:new(b("URI"))(h).setDomain("www.facebook.com")}}}function j(a){a=a.related_page_thread;if(a==null)return null;else{var c=b("bs_array").map(function(a){return{id:a.id,name:a.name,color:a.color}},a.custom_thread_tags.nodes),d=b("bs_array").map(function(a){return{id:a.id,name:a.name,color:a.label_color}},a.custom_thread_labels.nodes),e=a.page;e=e==null?null:e.id;return{flagged:a.is_flagged,pageID:e,customTags:c,customLabels:d}}}function k(a){__p&&__p();var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.edges;return b("bs_array").fold_left(function(a,b){b=b.node.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function l(a){__p&&__p();if(a.length===0)return null;else{var c={};b("bs_array").iter(function(a){var b=a.nickname;if(b==null)return 0;else{c[a.participant_id]=b;return 0}},a);return c}}function m(a){return"#"+b("bs_string").sub(a,2,a.length-2|0)}function n(a){if(!(a==null)&&a!=="")return m(a);else return null}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_js_primitive").nullable_to_opt(b("getByPath")(a,["messages","page_info"]))}function e(a){var c=b("CurrentUser").isWorkUser();c=c?g._("Workplace User"):g._("Facebook User");return{id:"fbid:"+a,fbid:b("FBID.bs").ofStringExn(a),gender:b("GenderConst").UNKNOWN_SINGULAR,href:null,image_src:null,big_image_src:null,name:c,short_name:c,user_type:null,vanity:null,accepts_messenger_user_feedback:!1,is_friend:!1,is_viewer_managing_parent:!1,is_messenger_user:!1,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_messenger_platform_bot:!1,is_messenger_ignored:null,is_messenger_blocked:!1,is_facebook_blocked:!0,is_subscribed_to_page_updates:!1,title:null,company_name:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,timezone:null,wec_group_admins:[],wec_group_creation_time:null,wec_group_invite_link:null,wec_group_participant_count:null,wec_group_participants:[],verification_status:null}}function o(a){__p&&__p();var c=a.profile_picture_url;if(c==null){var d=a.big_image_src;d=d==null?null:d.uri}else d=c;c=a.gender;var e=a.url,f;if(e==null)f=null;else{var g=b("isMessengerDotComURI")(new(b("URI"))(e));f=g?new(b("URI"))(e).getUnqualifiedURI().setDomain("www.facebook.com").setProtocol("https").toString():e}g=a.__typename;var h;switch(g){case"MessengerCallGuestUser":h=b("MercuryParticipantTypes").GUEST;break;case"NeoApprovedUser":h=b("MercuryParticipantTypes").PARENT_APPROVED_USER;break;case"Page":h=b("MercuryParticipantTypes").PAGE;break;case"User":h=b("MercuryParticipantTypes").USER;break;default:h=null}e=a.accepts_messenger_user_feedback;g=a.is_viewer_friend;var i=a.is_viewer_managing_parent,j=a.is_messenger_user,k=a.is_aloha_proxy_confirmed,l=a.is_messenger_platform_bot,m=a.is_message_blocked_by_viewer,n=a.is_blocked_by_viewer,o=a.is_viewer_subscribed_to_message_updates,p=a.work_info,q;if(p==null)q=null;else{var r=p.work_community;r=r==null?null:r.name;p=p.job_title;q=r==null?p==null?null:p:!(p==null)&&p.length!==0?""+(String(p)+(" \u2022 "+(String(r)+""))):r}p=a.work_info;if(p==null)r=null;else{p=p.work_community;p=p==null?null:p.name;var s=a.work_foreign_entity_info;r=!(p==null)&&!(s==null)&&s.type===b("WorkForeignEntityType").FOREIGN?p:null}s=a.is_employee;p=a.work_foreign_entity_info;var t=a.wec_group_creation_time,u=a.wec_group_invite_link,v=a.wec_group_participants,w=a.wec_group_participants,x=a.wec_group_admins;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:f,image_src:d,big_image_src:d,name:a.name,short_name:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.short_name),a.name),user_type:h,vanity:a.username,accepts_messenger_user_feedback:e==null?!1:e,is_friend:g==null?!1:g,is_viewer_managing_parent:i==null?!1:i,is_messenger_user:j==null?!1:j,is_aloha_proxy_confirmed:k==null?!1:k,is_business_enabled:a.__typename==="Page",is_messenger_platform_bot:l==null?!1:l,is_messenger_ignored:null,is_messenger_blocked:m==null?!1:m,is_facebook_blocked:n==null?!1:n,is_subscribed_to_page_updates:o==null?!0:o,title:q,company_name:r,employee:s==null?!1:s,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:p==null?null:p,timezone:null,wec_group_creation_time:t==null?null:t,wec_group_invite_link:u==null?null:u,wec_group_participant_count:v==null?null:v.count,wec_group_participants:w==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},w.nodes),wec_group_admins:x==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},x.nodes),verification_status:a.verification_status}}function p(a){return b("bs_array").map(function(a){return o(a.node.messaging_actor)},a.all_participants.edges)}function q(a,c){__p&&__p();c=c.read_receipts;if(c==null)return void 0;else{var d={};b("bs_array").iter(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0},c.nodes);return b("bs_js_primitive").some(d)}}function r(a){__p&&__p();a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function s(a,c,d){var e=c.messages;if(e==null)return void 0;else return b("bs_array").map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:b("bs_string").lowercase(c.folder)},d)},e.nodes)}function t(a,c,d){__p&&__p();var e=b("bs_array").map(function(f){__p&&__p();var g=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(f),h=f.extensible_attachment,i;if(h==null)i=null;else{var a=h.story_attachment,c=h.genie_attachment,d;if(c==null)d=null;else{c=c.genie_message;var e;if(c==null)e=null;else{c=c.story_attachment;e={story_attachment:c==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(c)}}d={genie_message:e}}i={legacy_attachment_id:h.legacy_attachment_id,story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a),genie_attachment:d}}return{message_id:f.message_id,snippet:f.snippet,message_sender:f.message_sender,timestamp_precise:f.timestamp_precise,commerce_message_type:f.commerce_message_type,extensible_attachment:i,blob_attachments:g,sticker:f.sticker,extensible_message_admin_text:f.extensible_message_admin_text,platform_xmd_encoded:f.platform_xmd_encoded}},c.last_message.nodes);e={id:c.id,thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pinned:c.is_pinned,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,is_page_unresponded_thread:c.is_page_unresponded_thread,cannot_reply_reason:c.cannot_reply_reason,can_viewer_report:c.can_viewer_report,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,group_thread_subtype:c.group_thread_subtype,thread_pin_timestamp:c.thread_pin_timestamp,page_unsubscribe_status:c.page_unsubscribe_status,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,work_groups_sync_metadata:c.work_groups_sync_metadata,description:c.description,joinable_link:c.joinable_link,linked_mentorship_programs:c.linked_mentorship_programs,theme:c.thread_theme,thread_connectivity_data:c.thread_connectivity_data,thread_unsendability_status:c.thread_unsendability_status,is_business_page_active:c.is_business_page_active,thread_associated_job_applications:c.thread_associated_job_applications,thread_associated_page_admin:c.thread_associated_page_admin};c=e.customization_info;var f;if(c==null)f=[null,null,null];else{var g=c.emoji;f=[n(c.outgoing_bubble_color),g==null?null:{emoji:g},l(c.participant_customizations)]}g=f[0];c=e.theme;if(c==null)g=[g,g,g,[],null];else{var o=c.gradient_colors.length,p=m(c.fallback_color),q=b("FBID.bs").ofString(c.id);q=q!==void 0?b("bs_js_primitive").valFromOption(q):null;if(o>0&&b("ChatConfig").get("chat_tab_has_gradients")){c=b("bs_array").map(m,c.gradient_colors);g=[p,b("bs_caml_array").caml_array_get(c,0),b("bs_caml_array").caml_array_get(c,o-1|0),c,q]}else g=[p,p,p,[],q]}o=e.page_comm_item;c=o==null?[null,null,null,null,null]:[o.comm_status,o.comm_source_id,o.id,o.subtitle,o.comm_item_owners];p=e.last_message.nodes.length!==0?b("bs_js_primitive").some(b("bs_caml_array").caml_array_get(e.last_message.nodes,0)):void 0;q=e.last_read_receipt.nodes.length!==0?b("bs_js_primitive").some(b("bs_caml_array").caml_array_get(e.last_read_receipt.nodes,0)):void 0;if(p!==void 0){o=b("bs_js_primitive").valFromOption(p);a=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:o.extensible_attachment,blob_attachments:o.blob_attachments,sticker:o.sticker},o.message_id,d)}else a=[];if(p!==void 0){o=b("bs_js_primitive").valFromOption(p).extensible_message_admin_text;if(o==null)d=null;else{o=o.game;d=o==null?null:o.id}}else d=null;o=b("MessengerThreadCannotReplyReason.bs").fromName(e.cannot_reply_reason);var r=e.thread_key.other_user_id;if(r==null){var s=e.thread_key.thread_fbid;s=s==null?null:s}else s=r;r=b("bs_array").fold_left(function(a,c){a[c.id]=b("MessengerGroupAdminType").REGULAR_ADMIN;return a},{},e.thread_admins);r=b("bs_array").fold_left(function(b,c){var d=c.node.messaging_actor.id;c=c.admin_type;var a=b[d];c==null||a!==void 0&&(b[d]=c);return b},r,e.all_participants.edges);var t=e.thread_queue_metadata,u=e.thread_type,v=e.group_thread_subtype,w=e.montage_thread,x=e.image,y=e.thread_key.other_user_id,z;if(p!==void 0){var A=b("bs_js_primitive").valFromOption(p).platform_xmd_encoded;if(A==null)z=!1;else{try{A=JSON.parse(A)}catch(a){A={}}A=b("bs_js_json").classify(A);z=typeof A==="number"||A.tag!==2?!1:b("bs_js_primitive").undefined_to_opt(A[0].landing_exp)!==void 0}}else z=!1;A=e.thread_queue_metadata;var B=e.name,C=e.associated_object,D;if(C==null)D=null;else{C=C.group_general_chat;if(C==null||s==null)D=null;else{C=C.id===s;D=C?b("MessengerObjectAssociationType").GENERAL_CHAT:b("MessengerObjectAssociationType").REGULAR_CHAT}}C=e.rtc_call_data;var E;if(C==null)E=null;else{var F=C.initiator;E={call_state:C.call_state,server_info_data:C.server_info_data,initiator_fbid:F==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(F.id))}}C=e.marketplace_thread_data;if(C==null)F=null;else{var G=C.for_sale_item,H;if(G==null)H=null;else{var I=G.formatted_price,J=G.location,K;if(J==null)K=null;else{J=J.reverse_geocode;K={reverse_geocode:J==null?null:{city:J.city,state:J.state}}}J=G.primary_photo;var L;if(J==null)L=null;else{J=J.image;L=J==null?null:J.uri}H={id:G.id,story_id:G.story_id,title:G.group_commerce_item_title,price:I==null?null:I.text,location:K,is_pending:G.is_pending,is_sold:G.is_sold,image_uri:L,url:G.url}}J=C.buyer;I=C.seller;F={for_sale_item:H,buyer_fbid:J==null?null:J.id,seller_fbid:I==null?null:I.id}}K=e.group_approval_queue;L=e.work_groups_sync_metadata;if(L==null)G=null;else{C=L.fb_group;G=C==null?null:C}H=e.linked_mentorship_programs;J=e.thread_associated_job_applications;return{admins:r,approval_mode:e.approval_mode,approval_queue_ids:t==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))},t.approval_requests.nodes),can_reply:o===void 0,cannot_reply_reason:o!==void 0?b("bs_js_primitive").valFromOption(o):null,can_viewer_report:e.can_viewer_report,solid_color:g[0],header_color:g[1],footer_color:g[2],gradient_colors:g[3],theme_id:g[4],thread_connectivity_data:e.thread_connectivity_data,custom_like_icon:f[1],custom_nickname:f[2],customization_enabled:e.customization_enabled,thread_type:u==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingThreadType")[u])),group_thread_subtype:v==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessengerGroupThreadSubType")[v])),page_unsubscribe_status:e.page_unsubscribe_status,participant_add_mode:e.participant_add_mode_as_string,ephemeral_ttl_mode:e.ephemeral_ttl_mode,folder:b("bs_string").lowercase(e.folder),has_email_participant:o!==void 0?b("bs_js_primitive").valFromOption(o)===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT:!1,has_montage:!(w==null),image_src:x==null?null:x.uri,is_archived:e.has_viewer_archived,is_pinned:e.is_pinned,is_page_follow_up:e.is_page_follow_up,is_page_unresponded_thread:e.is_page_unresponded_thread,is_canonical_user:k(e),is_canonical:!(y==null),is_from_weak_entry_point:z,is_pin_protected:e.is_pin_protected,is_subscribed:e.is_viewer_subscribed,is_canonical_neo_user:e.is_canonical_neo_user,is_thread_queue_enabled:!(A==null),joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(e.joinable_mode.mode),link:e.joinable_mode.link},last_message_timestamp:p!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_js_primitive").valFromOption(p).timestamp_precise):0,last_message_id:null,last_message_type:p!==void 0?b("bs_js_primitive").valFromOption(p).commerce_message_type:null,last_read_timestamp:q!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_js_primitive").valFromOption(q).timestamp_precise):0,lightweight_event:e.event_reminders.nodes.length===0?null:h(b("bs_caml_array").caml_array_get(e.event_reminders.nodes,0)),lightweight_events:b("bs_array").fold_left(function(a,b){a[b.id]=h(b);return a},{},e.event_reminders.nodes),message_count:e.message_count,mute_until:e.mute_until,name:B==null?"":B,object_association_type:D,other_user_fbid:e.thread_key.other_user_id,page_thread_info:j(e),participants:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.node.messaging_actor.id)},e.all_participants.edges),participants_event_status:e.participants_event_status,read_only:o!==void 0?b("bs_js_primitive").valFromOption(o)===b("MessengerThreadCannotReplyReason").READ_ONLY:!1,recipients_loadable:o!==void 0?b("bs_js_primitive").valFromOption(o)!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE:!0,server_timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),snippet_attachments:a,snippet_sender:p!==void 0?b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(p).message_sender.messaging_actor.id):null,snippet:p!==void 0?b("bs_js_primitive").valFromOption(p).snippet:null,thread_fbid:s,thread_id:"",thread_pin_timestamp:e.thread_pin_timestamp,timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),unread_count:e.unread_count,rtc_call_data:E,marketplace_thread_data:F,associated_object:i(e),reactions_mute_mode:e.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:e.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:c[0],page_comm_item_id:c[2],comm_source_id:c[1],subtitle:c[3],comm_item_owners:c[4],group_approval_queue:K==null?null:K.nodes,game_id:d,admin_model_status:b("MessengerGroupAdminModelStatus.bs").fromNullableString(e.admin_model_status_string),groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(e.groups_sync_status_string),work_associated_group:G,description:e.description,joinable_link:e.joinable_link,linked_mentorship_programs:H==null?null:H,thread_unsendability_status:b("MessageThreadUnsendabilityStatus.bs").fromNullableString(e.thread_unsendability_status),is_business_page_active:e.is_business_page_active,thread_associated_job_applications:J==null?null:J,thread_associated_page_admin:e.thread_associated_page_admin,graphql_token:e.id}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.getBlockedParticipant=e;f.transformParticipant=o;f.transformParticipants=p;f.transformReadReceipts=q;f.transformDeliveryReceipts=r;f.transformMessages=s;f.transformThread=t}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","bs_array","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){__p&&__p();b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();b("bs_array").iter(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}},c.messaging_actors);c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.fetch=a}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_caml_obj","BanzaiODS","immutable","bs_belt_Array","MercuryIDs","CurrentUser","bs_js_primitive","MercuryAssert","ImageSourceType","ImmutableObject","bs_js_null_undefined","ImageSourceRequest","MercuryVanityIDMap.bs","PhotoResizeModeConst","MercuryParticipantTypes","MercuryParticipantsConstants","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=[1],i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(){var a=b("CurrentUser").isWorkUser();if(a)return g._("Workplace User");else return g._("Facebook User")}function o(a){__p&&__p();var c=a.user_type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(){Object.keys(i).forEach(function(a){return b("bs_curry")._2(m,i,a)});return 0}function c(a){__p&&__p();a=a.participants;if(a==null)return 0;else{a.map(function(a){__p&&__p();var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=i[c];if(d!==void 0){i[c]=b("ImmutableObject").set(d,a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}});return 0}}function p(a,c){__p&&__p();var d={},e=[];a.forEach(function(a){var b=i[a];if(b!==void 0){d[a]=b;return 0}else{e.push(a);return 0}});if(e.length===0){c(d);return null}else{var f=[];e.forEach(function(a){__p&&__p();if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h[0].toString();k[g]=[a,c];h[0]=h[0]+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").fetch({ids:f}).then(function(a){__p&&__p();a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){__p&&__p();var d=k[a];if(d!==void 0){var e=d[0],c={};e.forEach(function(b){var a=i[b];if(a!==void 0){c[b]=a;return 0}else return 0});if(Object.keys(c).length===e.length){b("bs_curry")._2(l,k,a);return d[1](c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}}function d(a,c){b("MercuryAssert").isParticipantID(a);return p([a],function(d){d=d[a];if(d!==void 0)return b("bs_curry")._1(c,d);else return 0})}function q(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(i[a]))}function r(c,d){__p&&__p();var e=[],a=[];c.forEach(function(b){var c=q(b);c==null?e.push(b):a.push(c);return 0});if(e.length!==0){var f=p(e,function(){return b("bs_curry")._1(d,b("bs_belt_Array").keepMap(c,function(a){return b("bs_js_primitive").nullable_to_opt(q(a))}))});return[a,f]}else return[a,null]}function e(a,c){var d=function(a){return b("immutable").Map(a.map(function(a){return[a.id,a]}))},e=function(a){return b("bs_curry")._1(c,d(a))};a=r(a,e);return[d(a[0]),a[1]]}function s(a){return b("bs_curry")._2(l,k,a)}function t(a,c,d){new(b("ImageSourceRequest"))().setFBID(b("bs_js_null_undefined").fromOption(b("bs_js_primitive").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a)))).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(c,c).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(function(c){return b("bs_curry")._2(d,a,c)}).send();return 0}function u(a,c,d,e){__p&&__p();b("MercuryAssert").allParticipantIDs(a);var f=[!1],g=p(a,function(e){__p&&__p();var g={},h=function(d,e){g[d]=e;if(!f[0]&&a.length===Object.keys(g).length)return b("bs_curry")._1(c,g);else return 0},j=function(a,c){var d=e[a];d!==void 0&&(e[a]=b("ImmutableObject").set(d,{big_image_src:c.uri}));return h(a,c.uri)};Object.keys(e).map(function(a){return a}).forEach(function(a){var c=e[a];if(c!==void 0){var f=d===b("MercuryParticipantsConstants").BIG_IMAGE_SIZE;f=f?b("bs_js_primitive").nullable_to_opt(c.big_image_src):void 0;if(f!==void 0)return h(c.id,f);else return t(a,d,j)}else return t(a,d,j)});return 0});return{remove:function(){f[0]=!0;if(g==null)return 0;else return s(g)}}}function v(a,c,d){return u(a,c,b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,0)}function w(a,c){return v(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(d[a]))}))},0)}function x(a,c,d){return u(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(d[a]))}))},d,0)}function y(a){__p&&__p();if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c!==void 0)return b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(c));else return null}else return null}}f.reset=a;f.addParticipants=c;f.getDefaultName=n;f.get=d;f.getNow=q;f.getMulti=p;f.getMultiEager=r;f.getMultiEagerMap=e;f.removeCallback=s;f.getBigImageMultiWithSize=u;f.getBigImageMulti=v;f.getOrderedBigImageMulti=w;f.getOrderedBigImageMultiWithSize=x;f.getIDFromVanityOrFBID=y}),null);
__d("MessengerPersonas.bs",["bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){if(a==null)return 0;else{var b=g[a.id];if(b!==void 0)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[a]))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerPhotoIconSVGM4React.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){a=a!==void 0?a:36;return b("React").createElement("svg",{className:"_7oal",height:String(a)+"px",width:String(a)+"px",viewBox:"0 0 36 36"},b("React").createElement("g",{fill:"none",fillRule:"evenodd"},b("React").createElement("g",{id:"Group"},b("React").createElement("polygon",{points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{d:"M13.5,11 C12.1195,11 11,12.119 11,13.5 C11,14.881 12.1195,16 13.5,16 C14.8805,16 16,14.881 16,13.5 C16,12.119 14.8805,11 13.5,11 M26.638,21.467 L21.2375,18.767 C19.199,17.7485 16.801,17.7485 14.7625,18.767 L9.362,21.467 C9.1955,21.55 9,21.429 9,21.243 L9,11 C9,9.8955 9.8955,9 11,9 L25,9 C26.1045,9 27,9.8955 27,11 L27,21.243 C27,21.429 26.8045,21.55 26.638,21.467 M25,7 L11,7 C8.7905,7 7,8.791 7,11 L7,25 C7,27.209 8.7905,29 11,29 L25,29 C27.209,29 29,27.209 29,25 L29,11 C29,8.791 27.209,7 25,7",fill:c}))))}f.make=a}),null);
__d("MessengerPhotoIconSVGM4React.re",["bs_curry","MessengerPhotoIconSVGM4React.bs"],(function(a,b,c,d,e,f){a=function(a){a=b("bs_curry")._2(b("MessengerPhotoIconSVGM4React.bs").make,a.size,a.fill);return a};f.make=a}),null);
__d("MessengerReactIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{d:"M14.4951,17.5 C13.5576,17.5 12.9951,16.75 12.9951,15.5 C12.9951,14.25 13.5576,13.5 14.4951,13.5 C15.4326,13.5 15.9951,14.25 15.9951,15.5 C15.9951,16.75 15.4326,17.5 14.4951,17.5 M21.4951,17.5 C20.5576,17.5 19.9951,16.75 19.9951,15.5 C19.9951,14.25 20.5576,13.5 21.4951,13.5 C22.4326,13.5 22.9951,14.25 22.9951,15.5 C22.9951,16.75 22.4326,17.5 21.4951,17.5 M18.0071,25.0055 C15.7176,25.0055 13.5461,23.9185 12.1981,22.0985 C11.8691,21.6545 11.9626,21.028 12.4061,20.6985 C12.8491,20.369 13.4756,20.4625 13.8041,20.9065 C14.7766,22.2195 16.3481,23.004 18.0071,23.004 C19.6666,23.004 21.2376,22.2195 22.2101,20.9065 C22.5386,20.4625 23.1656,20.3695 23.6086,20.698 C24.0516,21.0275 24.1451,21.6545 23.8166,22.0985 C22.4686,23.9185 20.2971,25.0055 18.0071,25.0055 M18.0001,8 C12.4771,8 8.0001,12.477 8.0001,18 C8.0001,23.523 12.4771,28 18.0001,28 C23.5231,28 28.0001,23.523 28.0001,18 C28.0001,12.477 23.5231,8 18.0001,8 M18.0001,30 C11.3726,30 6.0001,24.6275 6.0001,18 C6.0001,11.3725 11.3726,6 18.0001,6 C24.6276,6 30.0001,11.3725 30.0001,18 C30.0001,24.6275 24.6276,30 18.0001,30",fill:a})))}function c(a){return b("React").createElement("svg",{height:"24px",width:"24px",viewBox:"0 0 26 26"},b("React").createElement("g",{fill:"none",fillRule:"evenodd"},b("React").createElement("polygon",{points:"0,26 26,26 26,0 0,0 "}),b("React").createElement("path",{d:"m19.1311,16.73095c-0.4325,-0.3545 -1.0775,-0.302 -1.441,0.122c-1.171,1.3615 -2.883,2.142 -4.697,2.142c-1.8135,0 -3.526,-0.7805 -4.697,-2.142c-0.363,-0.4225 -1.008,-0.4765 -1.441,-0.122c-0.432,0.355 -0.488,0.986 -0.1245,1.408c1.5605,1.8145 3.8435,2.855 6.2625,2.855c2.4195,0 4.702,-1.0405 6.2625,-2.855c0.3635,-0.422 0.3075,-1.053 -0.1245,-1.408m-2.1355,-7.731c-0.9375,0 -1.5,0.75 -1.5,2c0,1.25 0.5625,2 1.5,2c0.9375,0 1.5,-0.75 1.5,-2c0,-1.25 -0.5625,-2 -1.5,-2m-8,0c-0.9375,0 -1.5,0.75 -1.5,2c0,1.25 0.5625,2 1.5,2c0.9375,0 1.5,-0.75 1.5,-2c0,-1.25 -0.5625,-2 -1.5,-2m4.0045,16c-6.6275,0 -12,-5.3725 -12,-12c0,-6.6275 5.3725,-12 12,-12c6.6275,0 12,5.3725 12,12c0,6.6275 -5.3725,12 -12,12",fill:a})))}f.make=a;f.makeSolid=c}),null);
__d("MessengerReactionsUtil.bs",["EmojiFormat.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]];var g={};c.forEach(function(a,c){g[b("EmojiFormat.bs").codeArrayToUnicode(a)]=c+1|0;return 0});function a(a,b){a=g[a];b=g[b];if(a!==void 0)if(b!==void 0)return a-b|0;else return-1;else if(b!==void 0)return 1;else return 0}d=c.map(b("EmojiFormat.bs").codeArrayToUnicode);f.reactionsSortOrder=c;f.orderMap=g;f.sortFunction=a;f.defaultReactions=d}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment,i=f.genie_attachment,j;if(i==null)j=null;else{i=i.genie_message;var k;if(i==null)k=null;else{i=i.story_attachment;k={story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i)}}j={genie_message:k}}g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h),genie_attachment:j}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},null,d)}f.transform=a}),null);
__d("MessengerSharedPhotosVideosBaseData.bs",["bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){return b("bs_js_primitive").undefined_to_opt(g[a])}function h(a,b){g[a]=b;return 0}function c(a,b){__p&&__p();var c=g[a];if(c!==void 0){var d=c[1];if(d!==void 0){d=d;var e=d[0];if(e.length!==0){e=e.filter(function(a){return!b.some(function(b){return b===a.node.legacy_attachment_id})});c=c[0];e=[e,d[1],d[2],d[3]];d=[c,e];return h(a,d)}else return 0}else return 0}else return 0}f.data=g;f.get=a;f.set=h;f.localRemove=c}),null);
__d("MessengerSourceContext.bs",["React","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){"use strict";a=b("MercuryTriodeSourceUtil").getMercuryTriodeSource();c=b("React").createContext(a);f.defaultContextValue=a;f.context=c}),null);
__d("MessengerSourceContext.re",["MessengerSourceContext.bs"],(function(a,b,c,d,e,f){a=b("MessengerSourceContext.bs").context;f.context=a}),null);
__d("MessengerSurfaceType.bs",[],(function(a,b,c,d,e,f){"use strict";a="MESSENGER";b="WORK_QUIKCHAT";f.messenger=a;f.workQuickchat=b}),null);
__d("MessengerSurfaceContext.bs",["React","MessengerSurfaceType.bs"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext(b("MessengerSurfaceType.bs").messenger);c=b("MessengerSurfaceType.bs").messenger;f.defaultValue=c;f.context=a}),null);
__d("MessengerSurfaceContext.re",["MessengerSurfaceContext.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceContext.bs").context;f.context=a}),null);
__d("MessengerSurfaceType.re",["MessengerSurfaceType.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceType.bs").messenger;f.messenger=a;c=b("MessengerSurfaceType.bs").workQuickchat;f.workQuickchat=c}),null);
__d("MessengerTextWithEmoticonsReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerTextWithEmoticons.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerTextWithEmoticons.react"),{renderEmoji:b("bs_js_null_undefined").fromOption(a),renderEmoticons:b("bs_js_null_undefined").fromOption(c),text:b("bs_js_null_undefined").fromOption(d),customSize:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("MessengerThreadFetcher.bs",["Promise","bs_curry","gkx","FBIDCheck","bs_belt_Array","bs_caml_int32","MercuryIDs","bs_js_primitive","MercuryDispatcher","MercuryThreadIDMap","MercuryPayloadSource","bs_caml_builtin_exceptions","setTimeoutAcrossTransitions","MessengerGraphQLThreadFetcher.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a,c){__p&&__p();var d=c.other_user_fbid;if(d==null){c=c.thread_fbid;if(c==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Encountered thread with no server identifier"];else c=[c,b("MercuryIDs").getThreadIDFromThreadFBID(c)]}else c=[d,b("MercuryIDs").getThreadIDFromUserID(d)];d=c[1];c=c[0];a=b("MercuryThreadIDMap").getForFBID(a);var e={},f=a.getClientIDFromServerIDNow(c);if(f==null){a.setServerIDToClientID(c,d);e[c]=d;return[d,e]}else return[f,e]}function i(a,c,d){__p&&__p();var e=!b("FBIDCheck").isUser_deprecated(a);return b("MessengerGraphQLThreadFetcher.bs").fetchAll(a,[{id:c,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:d}],e).then(function(c){__p&&__p();c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c).thread;if(c==null)return b("Promise").resolve(!1);else{var d=h(a,c);b("MercuryDispatcher").getForFBID(a).handleUpdate({threads:[Object.assign(c,{thread_id:d[0]})],pinned_thread_ids:[],newlyAddedClientIDs:d[1],actions:[],preprocessed:!0,payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO});return b("Promise").resolve(!0)}}else return b("Promise").resolve(!1)})}function j(a,c,d){__p&&__p();return i(a,c,d).then(function(d){__p&&__p();var e=g.get(a);if(e==null)return b("Promise").resolve(!1);else{var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{b("bs_belt_Array").forEach(f[1],function(a){return b("bs_curry")._1(a,d)});e["delete"](c);return b("Promise").resolve(d)}}})["catch"](function(){__p&&__p();var e=g.get(a);if(e==null)return b("Promise").resolve(!1);else{var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{var h=f[1];f=f[0];if(f<5||b("gkx")("678666")){var k=b("bs_caml_int32").imul(Math.pow(2,Math.min(f,5)),1e3),l=new(b("Promise"))(function(f,g){__p&&__p();b("setTimeoutAcrossTransitions")(function(){i(a,c,d).then(function(a){f(a);b("bs_belt_Array").forEach(h,function(c){return b("bs_curry")._1(c,a)});e["delete"](c);return b("Promise").resolve(a)})["catch"](function(){return j(a,c,d)});return 0},k);return 0});e.set(c,[f+1|0,h]);return l}else{e["delete"](c);return b("Promise").resolve(!1)}}}})}function a(a,b,c,d){__p&&__p();var e=g.get(a);if(e==null){var f=new Map();f.set(b,[0,[d]]);g.set(a,f);j(a,b,c);return 0}else{f=e.get(b);if(f==null){e.set(b,[0,[d]]);j(a,b,c);return 0}else{f[1].push(d);return 0}}}f.fetch=a}),null);
__d("MessengerDeltaTransformer.bs",["Promise","FBID.bs","bs_block","bs_curry","gkx","bs_js_json","bs_caml_obj","FBIDCheck","bs_belt_Array","bs_caml_array","DateConsts","MercuryIDs","bs_belt_Option","bs_js_primitive","MessagingTag","MessengerState.bs","MontageActions","bs_js_null_undefined","MercuryActionType","MercuryDispatcher","MSuggestionActions","MercuryThreadIDMap","PageCommItemStatus","MercuryPayloadSource","MercuryProfileRanges","MercuryLogMessageType","MercuryServerRequests","MercurySyncDeltaTypes","MessagingThreadAction","MessageThreadReadState","MessengerThreadFetcher.bs","bs_caml_builtin_exceptions","MercuryGlobalActionType","MessengerWebDeltaEvents","PagesMessagingEventType","MessengerGroupsSyncStatus","MessengerGroupsSyncStatus.bs","MessageUnsendabilityStatus.bs","MessengerApprovalModeTypes","IrisProtocolMessageLifetime","MessengerApprovalQueueTypes","MessengerGroupRequestSource","MercuryMessageCustomizations","MessageThreadReadStateEffect","MessengerParticipantsFetcher.bs","MessengerWebDeltasTypedLogger","RepliedToMessageStatusForGraphQL","ClientSyncProtocol_GroupsSyncAction","MessengerRealtimeAttachmentTransformer.bs","MessengerWebDeltasTypedLoggerBootloader.bs","MessageLiveLocationClientSyncProtocolStopReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){try{return JSON.parse(a)}catch(a){return{}}}c=b("gkx")("780647");var h=c?0:1;function i(a,c){__p&&__p();var d=b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(c.otherUserFbId),function(a){return a.toString()});c=b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(c.threadFbId),function(a){return a.toString()});a=b("MercuryThreadIDMap").getForFBID(a);if(d!==void 0){d=d;d=[b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromUserID(b("FBID.bs").ofStringExn(d))),d]}else if(c!==void 0){c=c;d=[b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c))),c]}else d=[void 0,void 0];c=d[1];d=d[0];if(c!==void 0&&d!==void 0){c=c;var e=a.hasClientIDForServerID(c);if(e)return b("bs_js_primitive").nullable_to_opt(a.getClientIDFromServerIDNow(c));else return b("bs_js_primitive").valFromOption(d)}}function j(a,c){__p&&__p();var d=parseInt(c.messageMetadata.timestamp,10),e=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta(a,c),f=c.messageMetadata.actorFbId.toString(),h=b("bs_caml_obj").caml_equal(e,b("MessageThreadReadState").MARK_UNREAD)&&a!==f,j=!b("FBIDCheck").isUser_deprecated(a),k=c.attachments;k=k==null?[]:b("bs_belt_Array").keepMapU(k,function(e){__p&&__p();var c=e.mercury;if(c==null){e=e.mercuryJSON;e=e==null?null:g(e)}else e=c;if(e==null)return void 0;else{c=e.extensible_attachment;var d=e.blob_attachment;e=e.sticker_attachment;e=c==null?d==null?e==null?[]:b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:null,sticker:e},j):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:[d],sticker:null},j):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:b("bs_js_null_undefined").fromOption(c==null?void 0:b("bs_js_primitive").some(c)),blob_attachments:null,sticker:null},j);return b("bs_belt_Array").get(e,0)}});var l=c.messageMetadata.tags;l=l==null?void 0:b("bs_js_null_undefined").fromOption(b("bs_belt_Array").get(l,0));var m=c.data,n;if(m==null)n=null;else{var o=m.adminSignatureCreatorID;n=o!==void 0?{creatorID:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureCreatorID)),creatorName:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureCreatorName)),creatorType:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureCreatorType)),labelType:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureLabelType)),pageID:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignaturePageID)),profileURI:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureProfileURI))}:null}o=i(a,c.messageMetadata.threadKey);if(o!==void 0){m=c.ttl;var p=c.messageMetadata.threadKey.threadFbId,q=c.messageMetadata.threadKey.otherUserFbId,r=c.body,s=c.data;if(s==null){var t=c.untypedData;t=t==null?!1:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(t.is_sponsored),"false")==="true"}else t=b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(s.is_sponsored),"false")==="true";s=c.data;var u=c.data,v;if(u==null)v=null;else{u=u.customization;v=u!==void 0?b("MercuryMessageCustomizations").parseCustomizations(u):null}u=c.data;var w=c.data,x=c.data,y;if(x==null)y=null;else{x=x.message_source_data;if(x!==void 0){x=g(x);x=b("bs_js_json").classify(x);if(typeof x==="number"||x.tag!==2)y=null;else{x=x[0].message_source;y=x!==void 0?b("bs_js_null_undefined").fromOption(x===void 0?void 0:b("bs_js_primitive").some(x)):null}}else y=null}x=c.messageMetadata.skipBumpThread;var z=c.data,A;if(z==null)A=null;else{z=z.montage_reply_data;A=z!==void 0?g(z):null}z=c.data;var B;if(z==null)B=null;else{z=z.meta_ranges;B=z!==void 0?g(z):null}return{message_id:c.messageMetadata.messageId,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(f)),author_email:f+"@facebook.com",ephemeral_ttl_mode:m==null?0:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(b("IrisProtocolMessageLifetime")[m]),0),timestamp:d,is_unread:h,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_one_way_sent:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),is_forwarded:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT}),source:l,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:null,thread_fbid:p==null?null:p.toString(),other_user_fbid:q==null?null:q.toString(),body:r==null?"":r,html_body:null,subject:null,has_attachment:k.length>0,attachments:k,ranges:void 0,thread_id:o,action_type:b("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:!0,is_sponsored:t,commerce_message_type:s==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(s.commerce_message_type)),customizations:v,platform_xmd:u==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(u.platform_xmd)),profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),verse_group_role_xmd:w==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(w.verse_group_role_id)),message_source:y,skip_bump_thread:x==null?!1:x,thread_read_state_effect:e,montage_reply_data:A,meta_ranges:B,creator_info:n,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.messageMetadata.unsendType),comm_status:j?b("PageCommItemStatus").TODO:null}}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"]}function k(a,c,d,e){return b("bs_curry")._1(b("MessengerWebDeltasTypedLoggerBootloader.bs").LoadableMessengerWebDeltasTypedLogger[0],function(){var f=new(b("MessengerWebDeltasTypedLogger"))();f=f.setDeltaEvent(a).setDeltaType(c).setIgnoreReason(d).setSyncSeqID(e);f.log();return 0})}function l(a){return k(b("MessengerWebDeltaEvents").DELTA_RECEIVED,a,null,null)}function m(a,c){return k(b("MessengerWebDeltaEvents").DELTA_IGNORED,a,c,null)}function n(a,c,d,e){__p&&__p();var f=c.other_user_fbid;if(f==null){var g=c.thread_fbid;if(g==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"];else g=[g,!1]}else g=[f,!0];f=g[0];var h=b("MercuryThreadIDMap").getForFBID(a);h=h.getClientIDFromServerIDNow(f);if(h==null)if(e)return b("MessengerThreadFetcher.bs").fetch(a,f,g[1],function(e){if(e){b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[c],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return l(d)}else return m(d,"thread fetch failed")});else return m(d,"thread not already loaded, not required to be loaded");else{b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[c],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return l(d)}}function o(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_js_primitive").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_js_primitive").valFromOption(f));if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").REACTION_UPDATE,messageId:c.messageId,offlineThreadingId:c.offlineThreadingId,reaction:c.reaction,senderId:c.senderId.toString(),thread_fbid:e.toString(),other_user_fbid:null,userId:c.userId.toString()};else return void 0}}function p(a){return a/Math.pow(10,8)}function q(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d),f=c.threadKey.otherUserFbId,g=f==null?void 0:b("bs_js_primitive").some(f);d=d==null?f==null?[void 0,void 0]:[g,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(g)}]:[e,{otherUserFbId:b("bs_js_null_undefined").fromOption(e),threadFbId:null}];f=d[1];g=d[0];if(g!==void 0&&f!==void 0){e=i(a,b("bs_js_primitive").valFromOption(f));if(e!==void 0&&c.messageLiveLocations.length===1){d=b("bs_caml_array").caml_array_get(c.messageLiveLocations,0);a=d.expirationTime;f=d.stopReason;c=f==null?Date.now()/b("DateConsts").MS_PER_SEC>a:!0;f=d.coordinate;f=f==null?null:{latitude:p(f.latitude),longitude:p(f.longitude)};var h=d.destination;h=h==null?null:{latitude:p(h.latitude),longitude:p(h.longitude),label:h.label};var j=d.stopReason;j=j==null?null:j===b("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED||j===b("MessageLiveLocationClientSyncProtocolStopReason").CANCELED?"EXPIRED":j===b("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED?"ARRIVED":null;return{thread_id:e,action_type:b("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:g.toString(),other_user_fbid:null,messageId:d.messageId,liveLocation:{live_location_id:d.id.toString(),is_expired:c,expiration_time:a,sender:{id:d.senderId.toString()},coordinate:f,location_title:d.locationTitle,sender_destination:h,stop_reason:j}}}else return void 0}}function r(a,c){var d=c.threadKey.threadFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").EVENT_RSVP_CHANGED,actor_fbid:c.actorFbId.toString(),rsvp_status:c.rsvpStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return void 0}}function s(a,c){__p&&__p();var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0){c=c.isFollowUp;return{action_type:b("MercuryActionType").UPDATE_COMM_STATUS,comm_status:c?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}else return void 0}}function t(a,c){__p&&__p();var d=[];c.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a==null)return 0;else{d.push(a);return 0}});return b("MessengerParticipantsFetcher.bs").fetch({ids:d}).then(function(c){__p&&__p();var d=[],e=[];c.forEach(function(a){var b=a.id;if(a.is_messenger_blocked||a.is_facebook_blocked){d.push(b);return 0}else{e.push(b);return 0}});b("MercuryDispatcher").getForFBID(a).handleUpdate({from_client:!0,message_blocked_ids:d,message_unblocked_ids:e});return b("Promise").resolve(0)})["catch"](function(){return b("Promise").resolve(0)})}function u(a,c){__p&&__p();var d=c.actorFbid.toString(),e=b("FBID.bs").ofStringExn(d);if(b("bs_caml_obj").caml_notequal(e,a))e=b("bs_js_primitive").some(b("MercuryIDs").getParticipantIDFromUserID(a));else{var f=c.threadKey.otherUserFbId;if(f==null)e=void 0;else{f=b("FBID.bs").ofString(f.toString());e=f!==void 0?b("bs_js_primitive").some(b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(f))):void 0}}if(e!==void 0){f=b("bs_js_primitive").valFromOption(e);e=c.threadKey.otherUserFbId;if(e==null)return void 0;else{t(a,[f]);a=i(a,{otherUserFbId:e,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:d,canViewerReply:c.canViewerReply,reason:c.reason,message_blocked_ids:[f],other_user_fbid:e.toString(),thread_fbid:null,thread_id:a};else return void 0}}}function v(a,c){__p&&__p();var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_js_primitive").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:c.messageId,timestamp:c.timestamp,thread_fbid:e,other_user_fbid:null,keep_expiry_timestamp:c.keepExpiryTimestamp,thread_id:a};else return void 0}}function w(a,c){__p&&__p();var d=j(a,c.message),e=c.repliedToMessage;if(e==null)return b("bs_js_primitive").some(d);else{a=j(a,e);e=c.status;var f;if(e==null||e>2||e<0)f=void 0;else switch(e){case 0:f=b("bs_js_primitive").some(b("RepliedToMessageStatusForGraphQL").VALID);break;case 1:f=b("bs_js_primitive").some(b("RepliedToMessageStatusForGraphQL").DELETED);break;case 2:f=b("bs_js_primitive").some(b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE);break}if(f!==void 0)return b("bs_js_primitive").some(Object.assign(d,{replied_to_message:{status:b("bs_js_primitive").valFromOption(f),message:a}}));else return void 0}}function x(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_js_primitive").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_js_primitive").valFromOption(f));if(d!==void 0)return{action_type:b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_status_string:b("MessengerGroupsSyncStatus.bs").fromNullableString(c.groupsSyncStatus),thread_id:d};else return void 0}}function y(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_js_primitive").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];d=c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_IN?b("bs_js_primitive").some(b("MessengerGroupsSyncStatus").OPT_IN):c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_OUT?b("bs_js_primitive").some(b("MessengerGroupsSyncStatus").OPT_OUT):void 0;if(e!==void 0&&d!==void 0&&f!==void 0){a=i(a,b("bs_js_primitive").valFromOption(f));if(a!==void 0){f=c.syncedFbGroupId;return{action_type:b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_action:b("bs_js_primitive").valFromOption(d),source_surface:c.sourceSurface,fb_group_id:f==null?null:f.toString(),thread_id:a}}else return void 0}}function z(a,c){var d=c.threadKey.threadFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").DESCRIPTION_CHANGED,thread_fbid:d.toString(),other_user_fbid:null,group_thread_description_string:c.threadDescription,thread_id:a};else return void 0}}function A(a){return"#"+a.slice(2)}function B(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_js_primitive").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=e;e=i(a,b("bs_js_primitive").valFromOption(f));if(e!==void 0){a=e;f=c.fallbackColor!==""?A(c.fallbackColor):"";e=c.gradientColors;var g;if(e==null||!e.length)g=1;else{e=b("bs_belt_Array").map(e,A);return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId,solid_color:f,header_color:b("bs_caml_array").caml_array_get(e,0),footer_color:b("bs_caml_array").caml_array_get(e,e.length-1|0),gradient_colors:e,thread_id:a}}if(g===1)return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId,solid_color:f,header_color:f,footer_color:f,gradient_colors:[],thread_id:a}}else return void 0}}function C(a,c){__p&&__p();var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_js_primitive").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").CHANGE_PINNED_STATUS,thread_fbid:e,other_user_fbid:null,is_pinned:c.isPinned,thread_id:a,thread_pin_timestamp:c.timestamp};else return void 0}}function D(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;e=d==null?e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]:[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_js_primitive").valFromOption(d));if(a!==void 0){d=c.isSaved;var f=c.isSaved;return{action_type:b("MercuryActionType").MUTATE_TAGS,thread_fbid:e,other_user_fbid:null,thread_id:a,messageId:c.messageId,tags_to_add:d?["message:save"]:[],tags_to_delete:f?[]:["message:save"]}}else return void 0}}function E(a,c){var d=c.threadKey.threadFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_JOINABLE_LINK,joinable_link:c.privateGroupLink,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return void 0}}function F(a){__p&&__p();a=a.directives;if(a==null)return void 0;else{a=b("bs_belt_Array").get(a,0);if(a!==void 0){a=b("bs_js_primitive").valFromOption(a).data;if(a==null)return void 0;else{a=a.add_actions;if(a==null)return void 0;else{var c=a.actions;if(c==null)return void 0;else{c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c).thread_key;if(c==null)return void 0;else{var d=c.thread_fbid;c=c.other_user_fbid;var e;if(d==null)if(c==null)return void 0;else c=c,e=1;else c=d,e=1;if(e===1)return{action_type:b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS,thread_fbid:b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c)),other_user_fbid:null,thread_id:c,suggestions:a}}}else return void 0}}}}else return void 0}}function G(a,c){var d=c.threadKey.threadFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").PROMOTE_GROUP_ADMINS,thread_fbid:d.toString(),other_user_fbid:null,promoted_admins:b("bs_belt_Array").map(c.promotedAdmins,function(a){return{admin_fbid:a.adminFbId.toString(),admin_type:a.adminType}}),thread_id:a};else return void 0}}function H(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;if(d==null)if(e==null)return void 0;else{var f=i(a,{otherUserFbId:e,threadFbId:null});if(f!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:null,messageId:c.messageID,other_user_fbid:e.toString(),removed_timestamp:c.deletionTimestamp,thread_id:f,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return void 0}else{e=i(a,{otherUserFbId:null,threadFbId:d});if(e!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:d.toString(),messageId:c.messageID,other_user_fbid:null,removed_timestamp:c.deletionTimestamp,thread_id:e,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return void 0}}function I(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE,page_unsubscribe_status:c.unSubscribeStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return void 0}}function J(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLURRED_IMAGE_STATUS,blurred_image_uri:c.blurredImageUri,image_message_id:c.messageId,image_id:c.imageId,should_show:c.shouldShow,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return void 0}}function K(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:d.toString(),other_user_fbid:null,is_pin_protected:c.isPinProtected,thread_id:a};else return void 0}}function L(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS,other_user_fbid:d.toString(),subtitle_type:c.subtitleType,thread_connectivity_status:c.threadConnectivityStatus,thread_fbid:d.toString(),thread_id:a};else return void 0}}var M=function(a){return String.fromCharCode.apply(null,a)};function N(a,c){__p&&__p();c=JSON.parse(M(c.payload));c=b("bs_js_json").classify(c);if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","malformed payload"]);else{c=c[0].deltas;if(c!==void 0){c=b("bs_js_json").classify(c);if(typeof c==="number"||c.tag!==3)return b("bs_block").__(1,["DeltaClientDelta","delta is not an array"]);else{c=b("bs_belt_Array").get(c[0],0);if(c!==void 0){c=b("bs_js_json").classify(b("bs_js_primitive").valFromOption(c));if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","client delta is not an object"]);else{c=c[0];var d=!1,e=0,f=c.deltaMessageReaction;if(f!==void 0){d=!0;f=o(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaMessageReaction",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReaction","transform failed"])}f=c.liveLocationData;if(f!==void 0&&!d){d=!0;f=q(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.liveLocationData",h):e=b("bs_block").__(1,["DeltaClientDelta.liveLocationData","transform failed"])}f=c.deltaUpdateGroupEventRSVPStatus;if(f!==void 0&&!d){d=!0;f=r(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupEventRSVPStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupEventRSVPStatus","transform failed"])}f=c.deltaPageThreadFollowUpData;if(f!==void 0&&!d){d=!0;f=s(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPageThreadFollowUpData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageThreadFollowUpData","transform failed"])}f=c.deltaChangeViewerStatus;if(f!==void 0&&!d){d=!0;f=u(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaChangeViewerStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaChangeViewerStatus","transform failed"])}f=c.deltaMontageDirectExpire;if(f!==void 0&&!d){d=!0;f=v(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaMontageDirectExpire",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMontageDirectExpire","transform failed"])}f=c.deltaMessageReply;if(f!==void 0&&!d){d=!0;f=w(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaMessageReply",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReply","transform failed"])}f=c.deltaUpdateGroupsSyncStatus;if(f!==void 0&&!d){d=!0;f=x(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncStatus","transform failed"])}f=c.deltaUpdateGroupsSyncMetadata;if(f!==void 0&&!d){d=!0;f=y(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncMetadata",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncMetadata","transform failed"])}f=c.deltaGroupThreadDescription;if(f!==void 0&&!d){d=!0;f=z(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaGroupThreadDescription",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaGroupThreadDescription","transform failed"])}f=c.deltaUpdateThreadTheme;if(f!==void 0&&!d){d=!0;f=B(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateThreadTheme",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateThreadTheme","transform failed"])}f=c.deltaUpdateSavedMessage;if(f!==void 0&&!d){d=!0;f=D(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateSavedMessage",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateSavedMessage","transform failed"])}f=c.deltaUpdatePinnedThread;if(f!==void 0&&!d){d=!0;f=C(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdatePinnedThread",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedThread","transform failed"])}f=c.deltaUpdatePrivateGroupJoinableLink;if(f!==void 0&&!d){d=!0;f=E(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink","transform failed"])}f=c.deltaOmniMDirectivesV2;if(f!==void 0&&!d){d=!0;f=F(f);if(f!==void 0){f=b("bs_js_primitive").valFromOption(f);e=b("bs_block").__(0,["DeltaClientDelta.deltaOmniMDirectivesV2"]);b("MSuggestionActions").saveAllSuggestions(f.thread_id,f.suggestions)}else e=b("bs_block").__(1,["DeltaClientDelta.deltaOmniMDirectivesV2","transform failed"])}f=c.deltaPromoteGroupThreadAdmin;if(f!==void 0&&!d){d=!0;f=G(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPromoteGroupThreadAdmin",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPromoteGroupThreadAdmin","transform failed"])}f=c.deltaRecallMessageData;if(f!==void 0&&!d){d=!0;f=H(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaRecallMessageData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaRecallMessageData","transform failed"])}f=c.deltaPageUnSubscribeStatus;if(f!==void 0&&!d){d=!0;f=I(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPageUnSubscribeStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageUnSubscribeStatus","transform failed"])}f=c.deltaPageBlurredImageStatus;if(f!==void 0&&!d){d=!0;f=J(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPageBlurredImageStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageBlurredImageStatus","transform failed"])}f=c.deltaPaymentPinProtectionStatusData;if(f!==void 0){if(!d){d=!0;f=K(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPaymentPinProtectionStatusData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPaymentPinProtectionStatusData","transform failed"])}}else d||(e=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join()]));f=c.deltaThreadConnectivityStatusUpdate;if(f!==void 0){if(!d){d=!0;f=L(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaThreadConnectivityStatusUpdateData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaThreadConnectivityStatusUpdateData","transform failed"])}}else d||(e=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join()]));return e}}else return b("bs_block").__(1,["DeltaClientDelta","client delta is missing"])}}else return b("bs_block").__(1,["DeltaClientDelta","client delta has no deltas"])}}function O(a,c){__p&&__p();var d=[],e=[],f=c.folders,g=0;!(f==null)&&f.length!==0?b("bs_belt_Array").forEachU(f,function(a){d.push({action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("bs_js_primitive").undefined_to_opt(b("MessagingTag").IRIS_MAPPING[a]),timestamp:parseInt(c.watermarkTimestamp,10)});return 0}):g=1;g===1&&b("bs_belt_Array").forEachU(c.threadKeys,function(f){var d=i(a,f);if(d!==void 0){var g=parseInt(c.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(g);e.push({thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:f.otherUserFbId,thread_fbid:f.threadFbId,mark_as_read:!0,timestamp:g,folder:b("MessagingTag").INBOX});return 0}else return 0});return[d,e]}function P(a){if(a==null)return null;else return a.toString()}function Q(a){a=a.skipBumpThread;if(!(a==null)&&a)return h;else return 1}function R(a,c){__p&&__p();var d;switch(c.tag|0){case 0:var e=c[0],f=j(a,e);n(a,f,"deltaNewMessage",Q(e.messageMetadata));d=0;break;case 1:f=c[0];n(a,Object.assign(j(a,f.newMessage),{action_type:b("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:f.replacedMessageId}),"deltaReplaceMessage",h);d=0;break;case 2:e=c[0];f=e.threadKey.otherUserFbId;var g;if(f==null){var k=e.threadKey.threadFbId;if(k==null)g=void 0;else{var o=b("MercuryThreadIDMap").getForFBID(a);o=o.getClientIDFromServerIDNow(k.toString());g=o==null?void 0:b("bs_js_primitive").some(o)}}else{k=b("FBID.bs").ofString(f.toString());g=k!==void 0?b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromUserID(b("bs_js_primitive").valFromOption(k))):void 0}if(g!==void 0){o={};o[b("bs_js_primitive").valFromOption(g)]=parseInt(e.deliveredWatermarkTimestampMs,10);b("MercuryDispatcher").getForFBID(a).handleUpdate({delivery_receipts:o,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaDeliveryReceipt"])}else d=b("bs_block").__(1,["DeltaDeliveryReceipt","no thread id"]);break;case 3:f=O(a,c[0]);k=f[1];g=f[0];g.length&&b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[],global_actions:g,pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});k.length&&b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:k,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=g.length===0&&k.length===0?b("bs_block").__(1,["DeltaMarkRead","no local or global action"]):b("bs_block").__(0,["DeltaMarkRead"]);break;case 4:var p=c[0];e=b("bs_belt_Array").keepMapU(p.threadKeys,function(c){var d=i(a,c);if(d!==void 0){var e=parseInt(p.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(e);return{thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:e,folder:b("MessagingTag").INBOX}}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMarkUnread"]);break;case 5:o=c[0];n(a,Object.assign(j(a,o),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:o.messageMetadata.adminText,log_message_data:{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(o.leftParticipantFbId)]},log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE}),"DeltaParticipantLeftGroupThread",Q(o.messageMetadata));d=0;break;case 6:f=c[0];n(a,Object.assign(j(a,f),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:f.messageMetadata.adminText,log_message_data:{added_participants:b("bs_belt_Array").map(f.addedParticipants,function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.userFbId)})},log_message_type:b("MercuryLogMessageType").SUBSCRIBE}),"DeltaParticipantsAddedToGroupThread",Q(f.messageMetadata));d=0;break;case 7:g=c[0];k=j(a,g);e=b("FBID.bs").ofString(g.messageMetadata.actorFbId.toString());if(e!==void 0){o=b("bs_js_primitive").valFromOption(e);if(b("bs_caml_obj").caml_notequal(o,a))f=b("bs_js_primitive").some(a);else{e=g.messageMetadata.threadKey.otherUserFbId;if(e==null)f=void 0;else{e=b("FBID.bs").ofString(e.toString());f=e!==void 0?e:void 0}}if(f!==void 0){e=g.eventType;var q;if(e==null)q=b("MercuryLogMessageType").VIDEO_CALL;else{e=e==="VOICE_EVENT";q=e?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL}e=g.duration;n(a,Object.assign(k,{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:g.messageMetadata.adminText,log_message_data:{answered:e==null?!1:e>0,callee:b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(f)),caller:b("MercuryIDs").getParticipantIDFromUserID(o)},log_message_type:q,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(g.messageMetadata.unsendType)}),"DeltaRTCEventLog",Q(g.messageMetadata));d=0}else d=b("bs_block").__(1,["DeltaParticipantsAddedToGroupThread","calleeFBID is invalid"])}else d=b("bs_block").__(1,["DeltaRTCEventLog","actorFbId is not an fbid"]);break;case 8:k=c[0];n(a,Object.assign(j(a,k),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:k.messageMetadata.adminText,log_message_data:{name:k.name},log_message_type:b("MercuryLogMessageType").THREAD_NAME}),"DeltaThreadName",Q(k.messageMetadata));d=0;break;case 9:e=c[0];f={watermark:parseInt(e.watermarkTimestampMs,10),action:parseInt(e.actionTimestampMs,10)};o=e.threadKey.otherUserFbId;q=o==null?b("bs_js_primitive").nullable_to_opt(e.actorFbId):o.toString();g=e.threadKey.otherUserFbId;if(g==null){k=e.threadKey.threadFbId;o=k==null?void 0:k.toString()}else o=g.toString();if(q!==void 0)if(o!==void 0){e=o;k=b("MercuryThreadIDMap").getForFBID(a);g=k.getClientIDFromServerIDNow(e);if(g==null)d=b("bs_block").__(1,["DeltaReadReceipt","No clientID for serverID: "+e]);else{o={};k={};e=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(q));k[e]=f;o[g]=k;b("MercuryDispatcher").getForFBID(a).handleUpdate({roger:o,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaReadReceipt"])}}else d=b("bs_block").__(1,["DeltaReadReceipt","serverID is invalid"]);else d=b("bs_block").__(1,["DeltaReadReceipt","userID is invalid"]);break;case 10:q=c[0];n(a,Object.assign(j(a,q),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:q.messageMetadata.adminText,log_message_data:{message_type:q.type,untypedData:q.untypedData},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(q.messageMetadata.unsendType)}),"DeltaAdminTextMessage",Q(q.messageMetadata));d=0;break;case 11:e=c[0];f=i(a,{otherUserFbId:e.threadKey.otherUserFbId,threadFbId:e.threadKey.threadFbId});g=f!==void 0?{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:e.messageIds,other_user_fbid:P(e.threadKey.otherUserFbId),thread_fbid:P(e.threadKey.threadFbId),thread_id:f}:void 0;k=e.threadKey.threadFbId;o=e.folder;if(g!==void 0){q=b("bs_js_primitive").valFromOption(g);k==null?(n(a,q,"DeltaMessageDelete",h),d=0):o==null?(n(a,q,"DeltaMessageDelete",h),d=0):(o==="FOLDER_MONTAGE"?b("MontageActions").requestUpdate(k.toString()):n(a,q,"DeltaMessageDelete",h),d=0)}else d=b("bs_block").__(1,["DeltaMessageDelete","transform failed"]);break;case 12:f=c[0];e=i(a,{otherUserFbId:f.threadKey.otherUserFbId,threadFbId:f.threadKey.threadFbId});if(e!==void 0){g=f.action;n(a,{action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:P(f.threadKey.threadFbId),other_user_fbid:P(f.threadKey.otherUserFbId),archived:g==null?!1:g===b("MessagingThreadAction").ACTION_ARCHIVED,thread_id:e},"DeltaThreadAction",h);d=0}else d=b("bs_block").__(1,["DeltaThreadAction","transform failed"]);break;case 13:o=b("bs_belt_Array").keepMapU(c[0].threadKeys,function(c){var d=i(a,c);if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:o,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadDelete"]);break;case 14:k=c[0];q=i(a,{otherUserFbId:null,threadFbId:k.messageMetadata.threadKey.threadFbId});q!==void 0?(n(a,{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:P(k.messageMetadata.threadKey.threadFbId),other_user_fbid:null,removed_admin_ids:k.removedAdminFbIds,thread_id:q},"DeltaAdminRemovedFromGroupThread",h),d=0):d=b("bs_block").__(1,["DeltaAdminRemovedFromGroupThread","transform failed"]);break;case 15:f=c[0];g=i(a,f.threadKey);if(g!==void 0){e=[{thread_id:g,action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:f.threadKey.threadFbId,other_user_fbid:f.threadKey.otherUserFbId,mute_until:parseInt(f.expireTime,10)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadMuteSettings"])}else d=b("bs_block").__(1,["DeltaThreadMuteSettings","invalid thread ID"]);break;case 16:o=c[0];k=o.jsonBlob;if(k==null)d=b("bs_block").__(1,["DeltaPagesManagerEvent","no jsonBlob"]);else{try{q=JSON.parse(k)}catch(a){q={}}g=b("bs_js_json").classify(q);if(typeof g==="number"||g.tag!==2)d=b("bs_block").__(1,["DeltaPagesManagerEvent","jsonBlob is not an object"]);else{f=g[0];e=f.type;if(e!==void 0){k=b("bs_js_json").classify(e);if(typeof k==="number"||k.tag!==1)d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not a number"]);else if(k[0]===b("PagesMessagingEventType").FLAG){q=f.flagData;if(q!==void 0){g=b("bs_js_json").classify(q);if(typeof g==="number"||g.tag!==2)e=!1;else{k=g[0].state;if(k!==void 0){f=b("bs_js_json").classify(k);e=typeof f==="number"?f===1:!1}else e=!1}}else e=!1;q=i(a,o.threadKey);if(q!==void 0){g=[{thread_id:q,action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:e,other_user_fbid:o.threadKey.otherUserFbId,thread_fbid:o.threadKey.threadFbId}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaPagesManagerEvent"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","threadID is invalid"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not pagesFlag"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","no type on jsonBlob"])}}break;case 17:k=c[0];f=i(a,{otherUserFbId:null,threadFbId:k.messageMetadata.threadKey.threadFbId});f!==void 0?(n(a,{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:P(k.messageMetadata.threadKey.threadFbId),other_user_fbid:null,approval_mode:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessengerApprovalModeTypes")[k.mode])),thread_id:f},"DeltaApprovalMode",h),d=0):d=b("bs_block").__(1,["DeltaApprovalMode","transform failed"]);break;case 18:q=c[0];e=i(a,{otherUserFbId:q.messageMetadata.threadKey.otherUserFbId,threadFbId:q.messageMetadata.threadKey.threadFbId});if(e!==void 0){o=e;g=q.inviterFbId;if(g==null){k=q.recipientFbId;if(!(k==null)){f=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(k));e=q.action===b("MessengerApprovalQueueTypes").REMOVED;k=q.action===b("MessengerApprovalQueueTypes").REQUESTED;n(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:P(q.messageMetadata.threadKey.threadFbId),other_user_fbid:P(q.messageMetadata.threadKey.otherUserFbId),removed_id:e?f:null,added_id:k?f:null,thread_id:o},"DeltaApprovalQueue",h)}}else{e=q.action===b("MessengerApprovalQueueTypes").REMOVED;k=q.action===b("MessengerApprovalQueueTypes").REQUESTED;if(k){f=q.requestSource;var r;if(f==null)r=b("MessengerGroupRequestSource").ADD;else switch(f){case"ADD":r=b("MessengerGroupRequestSource").ADD;break;case"JOIN_THROUGH_LINK":r=b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;break;default:r=b("MessengerGroupRequestSource").ADD}k={requester:{id:q.recipientFbId},inviter:{id:g},request_source:r,request_timestamp:q.requestTimestamp}}else k=null;n(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:P(q.messageMetadata.threadKey.threadFbId),other_user_fbid:P(q.messageMetadata.threadKey.otherUserFbId),removed_group_id:e?q.recipientFbId:null,added_group_id:k,thread_id:o},"DeltaApprovalQueue",h)}d=0}else d=b("bs_block").__(1,["DeltaApprovalQueue","transform failed"]);break;case 19:f=c[0];n(a,j(a,f.deltaNewMessage),"DeltaGenieMessage",Q(f.deltaNewMessage.messageMetadata));d=0;break;case 20:g=c[0];e=g.messageMetadata.threadKey;if(e==null)q=void 0;else{k=e.threadFbId;q=k==null?void 0:k}o=g.initiator;if(o==null)f=void 0;else{e=o.userFbId;f=e==null?void 0:e.toString()}k=i(a,{otherUserFbId:null,threadFbId:q});k!==void 0?(n(a,{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:P(q),other_user_fbid:null,call_state:g.callState,server_info_data:g.serverInfoData,initiator_fbid:f,thread_id:k},"DeltaRTCCallData",h),d=0):d=b("bs_block").__(1,["DeltaRTCCallData","transform failed"]);break;case 21:o=c[0];e=i(a,o.threadKey);if(e!==void 0){q=[{thread_id:e,action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:o.threadKey.otherUserFbId,new_folder:b("bs_js_primitive").undefined_to_opt(b("MessagingTag").IRIS_MAPPING[o.folder])}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:q,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadFolder"])}else d=b("bs_block").__(1,["DeltaThreadFolder","threadID is invalid"]);break;case 22:g=c[0];f=i(a,g.threadKey);if(f!==void 0){k=[{thread_id:f,action_type:b("MercuryActionType").MUTATE_TAGS,messageId:g.messageId,tags_to_add:g.tagsToAdd,tags_to_delete:g.tagsToDelete}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:k,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMutateMessageTags"])}else d=b("bs_block").__(1,["DeltaMutateMessageTags","threadID is invalid"]);break;case 23:d=N(a,c[0]);break}if(typeof d==="number")return 0;else if(d.tag)return m(d[0],d[1]);else return l(d[0])}function a(a,c){__p&&__p();if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").NewMessage))return R(a,b("bs_block").__(0,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReplaceMessage))return R(a,b("bs_block").__(1,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").DeliveryReceipt))return R(a,b("bs_block").__(2,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkRead))return R(a,b("bs_block").__(3,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkUnread))return R(a,b("bs_block").__(4,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantLeftGroupThread))return R(a,b("bs_block").__(5,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread))return R(a,b("bs_block").__(6,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").RTCEventLog))return R(a,b("bs_block").__(7,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadName))return R(a,b("bs_block").__(8,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReadReceipt))return R(a,b("bs_block").__(9,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminTextMessage))return R(a,b("bs_block").__(10,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MessageDelete))return R(a,b("bs_block").__(11,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadAction))return R(a,b("bs_block").__(12,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadDelete))return R(a,b("bs_block").__(13,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminRemovedFromGroupThread))return R(a,b("bs_block").__(14,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadMuteSettings))return R(a,b("bs_block").__(15,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").PagesManagerEvent))return R(a,b("bs_block").__(16,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalMode))return R(a,b("bs_block").__(17,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalQueue))return R(a,b("bs_block").__(18,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ClientPayload))return R(a,b("bs_block").__(23,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").GenieMessage))return R(a,b("bs_block").__(19,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").RtcCallData))return R(a,b("bs_block").__(20,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkFolderSeen)){l("DeltaMarkFolderSeen");return b("bs_curry")._2(b("MessengerState.bs").send,b("bs_js_primitive").some(a),[b("bs_block").__(0,[b("bs_block").__(64,[c])])])}else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadFolder))return R(a,b("bs_block").__(21,[c]));else return 0}f.transform=a}),null);
__d("ThreadConnectivityStatusGraphQLType.bs",[],(function(a,b,c,d,e,f){"use strict";a="UNCONNECTED";b="IMPLICIT_OR_TWO_WAY_MESSAGING";f.unconnected=a;f.implicitOrTwoWayMessaging=b}),null);
__d("ThreadConnectivityStatusGraphQLType.re",["ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){a=b("ThreadConnectivityStatusGraphQLType.bs").unconnected;f.unconnected=a;c=b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging;f.implicitOrTwoWayMessaging=c}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return!1;else return a}function b(a){if(a!==void 0)return a;else return!1}function c(a){if(a!==void 0)return a;else return!1}f.isTruthy=a;f.isSomeTrue=b;f.optionBoolToBool=c}),null);
__d("MessengerPersistantViewerKeyedSubscriptionComponent.bs",["bs_curry","React","bs_belt_Id","CurrentUser","bs_js_primitive","RemoteAction.bs","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=[0],d=function(a,c){return b("bs_caml_primitive").caml_int_compare(a[0],c[0])};b("bs_belt_Id").MakeComparable([d]);var e={},f=function(a,c){a=a!==void 0?b("bs_js_primitive").valFromOption(a):b("CurrentUser").getID();var d=e[a];if(d!==void 0)return b("RemoteAction.bs").send(d[0],c);else{d=g(a,void 0,0);return b("RemoteAction.bs").send(d[0],c)}},g=function(d,g,h){__p&&__p();h=g!==void 0?b("bs_js_primitive").valFromOption(g):b("RemoteAction.bs").create(0);var i=new Set(),j=[b("bs_curry")._1(a[0],d)];b("RemoteAction.bs").subscribe(function(c){var d=j[0];j[0]=b("bs_curry")._2(a[1],c,d);if(j[0]!==d){i.forEach(function(a){return b("bs_curry")._1(a[1],0)});return 0}else return 0},h);g=function(a,d){__p&&__p();var e=b("React").useState(function(){return j[0]}),f=e[1],g=e[0],h=b("React").useCallback(function(){if(a!==void 0)if(b("bs_curry")._2(a,g,j[0]))return b("bs_curry")._1(f,function(){return j[0]});else return 0;else return b("bs_curry")._1(f,function(){return j[0]})},[a,g,j[0]]);b("React").useEffect(function(){c[0]=c[0]+1|0;var a=c[0],d=[a,h];i.add(d);b("bs_curry")._1(h,0);return function(){i["delete"](d);return 0}},[h]);return b("bs_curry")._1(d,g)};h=[h,g];e[d]=h;var k=b("bs_js_primitive").some(d);b("bs_curry")._2(a[2],d,function(a){return f(k,a)});return h};d=function(a){var c=a.shouldUpdate,d=a.remoteAction,f=a.fbid;f=f!==void 0?b("bs_js_primitive").valFromOption(f):b("CurrentUser").getID();a=a.children;var h=e[f];if(h!==void 0)return b("bs_curry")._2(h[1],c,a);else return b("bs_curry")._2(g(f,d,0)[1],c,a)};d.displayName="MessengerPersistantViewerKeyedSubscriptionComponent("+(a[3]+")");return[d,f]}f.Make=a}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","CurrentUser","MessagingTag","ImmutableObject","MessengerParticipants.bs","MercuryParticipantTypes","MessengerJoinableModeType","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=d.find(function(b){return b!==a});i=i!==void 0?b("MessengerParticipants.bs").getNow(i):null;var j=b("CurrentUser").isWorkUser();j=!(i==null)&&j&&i.work_foreign_entity_info==null&&i.user_type===b("MercuryParticipantTypes").USER?[!1,b("MessengerThreadCannotReplyReason").RECIPIENTS_INVALID]:[!0,null];i=h==="user";return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:i?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:j[0],cannot_reply_reason:j[1],can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,groups_sync_status:null,group_thread_subtype:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_id:null,last_message_type:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,thread_connectivity_data:null,thread_fbid:null,thread_pin_timestamp:null,thread_type:null,thread_unsendability_status:null,gradient_colors:[],joinable_link:null,linked_mentorship_programs:null,is_business_page_active:!1,thread_associated_job_applications:null,thread_associated_page_admin:null,graphql_token:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable([a]);d=c[0];f.cmp=d}),null);
__d("ThreadConnectivityStatus.bs",["bs_caml_obj","ThreadConnectivityStatus","ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("bs_caml_obj").caml_equal(a,b("ThreadConnectivityStatus").UNCONNECTED);if(a)return b("ThreadConnectivityStatusGraphQLType.bs").unconnected;else return b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging}f.toGraphQLValue=a}),null);
__d("ThreadId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable([a]);d=c[0];f.cmp=d}),null);
__d("MessengerTypingUtils.bs",["bs_belt_Map","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!==void 0)return b("bs_belt_Map").keysToArray(b("bs_js_primitive").valFromOption(a));else return[]}f.getTypingUserIDs=a}),null);
__d("MessengerUploadFilesUtil.bs",["bs_array","bs_curry","FantaTypeFileUploader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e=(d={},d[b("FantaTypeFileUploader").fileTypes.ANIMATED_IMAGE]="gif_ids",d[b("FantaTypeFileUploader").fileTypes.AUDIO]="audio_ids",d[b("FantaTypeFileUploader").fileTypes.FILE]="file_ids",d[b("FantaTypeFileUploader").fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",d[b("FantaTypeFileUploader").fileTypes.IMAGE]="image_ids",d[b("FantaTypeFileUploader").fileTypes.VIDEO]="video_ids",d);function a(a,b){if(a==null)return null;else{a=a.getTypeIDs(b);if(a.length!==0)return a;else return null}}function g(a){__p&&__p();if(a==null)return void 0;else{a=a.get("uploadedFiles");var b=[],c=[],d=[];a.forEach(function(a,e,f){__p&&__p();e=a.file;if(e.type.startsWith("image/")){b.push(e);return 0}else if(e.type.startsWith("video/")){c.push(e);return 0}else{d.push(e);return 0}});return[b,c,d]}}function h(a,c){if(c.length!==0)return b("bs_curry")._1(a,c);else return 0}function c(a,c){__p&&__p();if(a==null||c==null)return 0;else{a=g(a);if(a!==void 0){a=a;b("bs_array").iter(function(a){return h(c,[a])},a[1]);h(c,a[0]);return h(c,a[2])}else return 0}}f.supportAttachments=e;f.getAttachmentIDs=a;f.getAttachments=g;f.sendAttchment=h;f.sendAttchments=c}),null);
__d("OnlineUserIds.bs",["bs_belt_Set","ParticipantId.bs"],(function(a,b,c,d,e,f){"use strict";function a(){return b("bs_belt_Set").make([b("ParticipantId.bs").cmp])}function c(a){return b("bs_belt_Set").fromArray(a,[b("ParticipantId.bs").cmp])}f.make=a;f.fromArray=c}),null);
__d("XUICloseButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","XUICloseButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g){var h;switch(d){case 0:h="small";break;case 1:h="medium";break;case 2:h="large";break}return b("ReasonReact.bs").wrapJsForReason(b("XUICloseButton.react"),{className:b("bs_js_null_undefined").fromOption(a),onClick:e,tooltip:b("bs_js_null_undefined").fromOption(f),shade:c?"dark":"light",size:h},g)}f.make=a}),null);
__d("ReplyingToMessageFallbackReact.bs",["cx","fbt","React","ReasonReact.bs","XUICloseButtonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("ReplyingToMessageFallbackReact");function j(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("React").createElement("div",{className:(d?"_692o":"")+" _67tu"},b("ReasonReact.bs").element(void 0,void 0,b("XUICloseButtonReact.bs").make("_67tv",1,d?1:2,a,void 0,[])),h._("Replying to message"))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.onCancelReplyingToMessage,[],a.isChatTab)});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return b===a});return c.length!==0}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("SplitImage.bs",["ReasonReact.bs","SplitImage.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("SplitImage.react"),{border:b("bs_js_null_undefined").fromOption(e),size:a,srcs:c,className:b("bs_js_null_undefined").fromOption(d)},f)}f.make=a}),null);
__d("XUIBadgeReact.bs",["ReasonReact.bs","XUIBadge.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)if(a)return"regular";else return"special"}function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("XUIBadge.react"),{className:b("bs_js_null_undefined").fromOption(c),count:b("bs_js_null_undefined").fromOption(d),maxcount:b("bs_js_null_undefined").fromOption(e),type:b("bs_js_null_undefined").fromOption(g(a))},f)}f.stringOfBadgeType=g;f.make=a}),null);
__d("MessengerPresenceProvider.bs",["FBID.bs","bs_curry","React","Arbiter","bs_belt_Set","bs_caml_obj","bs_belt_Array","MercuryIDs","bs_belt_Option","bs_js_primitive","OnlineUserIds.bs","ParticipantId.bs","PresenceStatus","PresencePrivacy","AvailableListConstants","MessengerPersistantViewerKeyedSubscriptionComponent.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=["privacy-changed","privacy-availability-changed","privacy-user-presence-response"];function a(){return b("OnlineUserIds.bs").make(0)}function c(a,c){if(a){a=a[0];var d=b("bs_caml_obj").caml_equal(b("PresenceStatus").get(a),b("AvailableListConstants").ACTIVE);if(d)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(a));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(a))}else return b("bs_belt_Set").fromArray(b("bs_belt_Array").map(b("PresenceStatus").getOnlineIDs(),function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)}),[b("ParticipantId.bs").cmp])}function d(a,c){__p&&__p();b("PresencePrivacy").subscribe(g,function(){return b("bs_curry")._1(c,0)});b("bs_curry")._1(c,0);b("Arbiter").subscribe(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(a,d){if(d==null)return 0;else{a=b("FBID.bs").ofStringExn(d);return b("bs_curry")._1(c,[a])}});return 0}a=b("MessengerPersistantViewerKeyedSubscriptionComponent.bs").Make([a,c,d,"MessengerPresenceProvider"]);var h=a[0];function i(a,c,d,e,f,g){g={children:e};a!==void 0&&(g.shouldUpdate=b("bs_js_primitive").valFromOption(a));c!==void 0&&(g.remoteAction=b("bs_js_primitive").valFromOption(c));d!==void 0&&(g.fbid=b("bs_js_primitive").valFromOption(d));f!==void 0&&(g.key=b("bs_js_primitive").valFromOption(f));return g}function j(a){var c=a.subscribeToIDs,d=a.remoteAction,e=a.fbid;a=a.children;d=i(function(a,d){if(c!==void 0){d=b("bs_belt_Set").union(b("bs_belt_Set").diff(a,d),b("bs_belt_Set").diff(d,a));return!b("bs_belt_Set").isEmpty(b("bs_belt_Set").intersect(d,b("bs_js_primitive").valFromOption(c)))}else return!1},d,e,a,void 0,0);return b("React").createElement(h,d)}function e(a){var c=[b("ParticipantId.bs").cmp],d={children:a.children},e=b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(a.subscribeToIDs),function(a){return b("bs_belt_Set").fromArray(a,c)});e!==void 0&&(d.subscribeToIDs=b("bs_js_primitive").valFromOption(e));e=b("bs_js_primitive").nullable_to_opt(a.fbid);e!==void 0&&(d.fbid=b("bs_js_primitive").valFromOption(e));return j(d)}c=a[1];d=j;f.privacyEvents=g;f.send=c;f.makePropsOriginal=i;f.make=d;f.jsComponent=e}),null);
__d("MessengerReadReceipt.bs",["bs_array","Utils.bs","immutable","bs_js_primitive","bs_belt_MapString","MercuryActionStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e){__p&&__p();c=c>=a.timestamp;var f=a.status;e=!e||d!==a.author;if(c)if(f==null)if(e)return!0;else return!1;else if(e)return f===b("MercuryActionStatus").SUCCESS;else return!1;else return!1}function a(a,c,d){__p&&__p();if(c==null)return[];else{a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_js_primitive").valFromOption(a).reduce(function(a,e,f,h){if(g(c,e.watermark,f,b("Utils.bs").isTruthy(d)))return b("bs_array").append(a,[f]);else return a},[]);else return[]}}function c(a,c){a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_js_primitive").valFromOption(a).reduce(function(a,b,d,e){if(a)return g(c,b.watermark,d,!1);else return!1},!0);else return!1}function d(a,c){a=b("bs_belt_MapString").get(a,c);if(a!==void 0)return b("bs_js_primitive").valFromOption(a);else return b("immutable").OrderedMap()}function e(a,c,d){a=b("bs_belt_MapString").get(a,c);if(a!==void 0){c=b("bs_js_primitive").valFromOption(a).get(d);if(c==null)return null;else return c}else return null}var h=b("bs_belt_MapString").isEmpty,i=b("bs_belt_MapString").empty;f.emptyReadReceipts=i;f.wasSeen=g;f.getSeenBy=a;f.wasSeenByAll=c;f.getSeenTimestamps=d;f.getSeenTimestamp=e;f.hasReadReceipts=h}),null);